(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d3d"],{"1c96":function(a,t,o){},2236:function(a,t,o){"use strict";o("1c96")},5830:function(a,t,o){"use strict";o.r(t);var e=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("core-progress-modal",{attrs:{show:a.loading}}),a.loading?a._e():o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{md12:""}},[o("v-card",{staticClass:"elevation-0"},[o("v-card-text",[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{md3:""}},[o("core-label-value",{attrs:{label:"Nome",value:a.value.nome}})],1),o("v-flex",{attrs:{md3:""}},[o("core-label-value",{attrs:{label:"CPF",value:a.value.cpf}})],1),o("v-flex",{attrs:{md2:""}},[o("core-label-value",{attrs:{label:"Parcela Maior Atraso",value:""+a.dadosAcordo.diasAtraso}})],1)],1)],1)],1)],1),o("v-flex",{attrs:{"md-12":""}},[o("material-card",{attrs:{color:"primary",flat:"","full-width":"",title:"Nova Renegociação de Dívida"}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{md4:""}},[o("v-card",{staticClass:"pa-3"},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-center label-divida",staticStyle:{"background-color":"#1b84b5","border-color":"#1b84b5",color:"#FFFFFF"},attrs:{xs12:""}},[o("span",{staticClass:"title"},[a._v("Total da Dívida Selecionada")])]),o("v-flex",{staticClass:"text-xs-right label-divida",attrs:{sm6:"",xs6:""}},[o("span",{staticClass:"body-2"},[a._v("Valor em Atraso")])]),o("v-flex",{staticClass:"valor-divida",attrs:{sm6:"",xs6:""}},[o("span",[a._v("R$ "+a._s(a.formatValorMonetario(a.divida.valorAtraso)))])]),o("v-flex",{staticClass:"text-xs-right label-divida",attrs:{sm6:"",xs6:""}},[o("span",{staticClass:"body-2"},[a._v("(+) Valor a Vencer")])]),o("v-flex",{staticClass:"valor-divida",attrs:{sm6:"",xs6:""}},[o("span",[a._v("R$ "+a._s(a.formatValorMonetario(a.divida.valorVencer)))])]),o("v-flex",{staticClass:"text-xs-right label-divida",attrs:{sm6:"",xs6:""}},[o("span",{staticClass:"body-2"},[a._v("(=) Saldo Devedor")])]),o("v-flex",{staticClass:"valor-divida",attrs:{sm6:"",xs6:""}},[o("span",[a._v("R$ "+a._s(a.formatValorMonetario(a.divida.valorAtraso+a.divida.valorVencer)))])]),o("v-flex",{staticClass:"text-xs-right label-divida body-2",attrs:{sm6:"",xs6:""}},[a._v("\n                  (+) Multa + Juros de Mora\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm6:"",xs6:""}},[o("span",[a._v("R$ "+a._s(a.formatValorMonetario(a.divida.valorMultaJurosMora)))])]),o("v-flex",{staticClass:"text-xs-right label-divida title",attrs:{sm6:"",xs6:""}},[a._v("\n                  (=) Total da Dívida\n                ")]),o("v-flex",{staticClass:"valor-divida title",attrs:{sm6:"",xs6:""}},[o("span",[a._v("R$ "+a._s(a.formatValorMonetario(a.divida.valorTotal)))])])],1)],1)],1),o("v-flex",{attrs:{md8:""}},[o("v-card",{staticClass:"pa-3"},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"text-xs-center label-divida",staticStyle:{"background-color":"#1b84b5","border-color":"#1b84b5",color:"#FFFFFF"},attrs:{xs12:""}},[o("span",{staticClass:"title"},[a._v("Renegociação - Descontos até 150,00% | 150,00% / Parcelamento até 99 vez(es) / Atraso mínimo de 60 dia(s)")])]),o("v-flex",{staticClass:"text-xs-right label-divida",attrs:{sm8:"",xs10:""}},[o("v-layout",{attrs:{row:""}},[o("v-flex",{attrs:{md4:"",sm12:"",xs12:""}},[o("span",{staticClass:"body-2"},[a._v("(-) Desconto de ")])]),o("v-flex",{attrs:{md2:"",sm12:"",xs12:""}},[o("v-text-field",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,rules:[a.rules.maxDescontoAtraso],maxlength:"6",reverse:"",prefix:"%",type:"tel"},model:{value:a.form.peDescontoValorAtraso,callback:function(t){a.$set(a.form,"peDescontoValorAtraso",t)},expression:"form.peDescontoValorAtraso"}})],1),o("v-flex",{staticClass:"text-xs-left",attrs:{md6:"",sm12:"",xs12:""}},[o("span",{staticClass:"body-2"},[a._v("sobre o valor em atraso ")])])],1)],1),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[a._v("\n                  R$ "+a._s(a.formatValorMonetario(a.calculaDescontoAtraso))+"\n                ")]),o("v-flex",{staticClass:"text-xs-right label-divida",attrs:{sm8:"",xs10:""}},[o("v-layout",{attrs:{row:""}},[o("v-flex",{attrs:{md4:"",sm12:"",xs12:""}},[o("span",{staticClass:"body-2"},[a._v("(-) Desconto de ")])]),o("v-flex",{attrs:{md2:"",sm12:"",xs12:""}},[o("v-text-field",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,reverse:"",prefix:"%",type:"tel",maxlength:"6"},model:{value:a.form.peDescontoMultaJuros,callback:function(t){a.$set(a.form,"peDescontoMultaJuros",t)},expression:"form.peDescontoMultaJuros"}})],1),o("v-flex",{staticClass:"text-xs-left",attrs:{md6:"",sm12:"",xs12:""}},[o("span",{staticClass:"body-2"},[a._v("sobre multa + juros de mora ")])])],1)],1),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[a._v("\n                  R$ "+a._s(a.formatValorMonetario(a.calculaDescontoJurosMulta))+"\n                ")]),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs10:""}},[a._v("\n                  (=) Total com Desconto\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[a._v("\n                  R$ "+a._s(a.formatValorMonetario(a.calculaTotalComDesconto))+"\n                ")]),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs4:""}},[a._v("\n                  (-) Entrada de\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[o("v-text-field",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,suffix:"R$",reverse:"",type:"tel"},model:{value:a.form.valorEntrada,callback:function(t){a.$set(a.form,"valorEntrada",t)},expression:"form.valorEntrada"}})],1),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs4:""}},[a._v("\n                  (+) Tarifa Serviço\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[o("v-text-field",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,reverse:"",suffix:"R$",type:"tel"},model:{value:a.form.tarifaServico,callback:function(t){a.$set(a.form,"tarifaServico",t)},expression:"form.tarifaServico"}})],1),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs4:""}},[a._v("\n                  (+) Outros Acréscimos\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[o("v-text-field",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,reverse:"",suffix:"R$",type:"tel"},model:{value:a.form.outrosAcrescimos,callback:function(t){a.$set(a.form,"outrosAcrescimos",t)},expression:"form.outrosAcrescimos"}})],1),o("v-flex",{staticClass:"text-xs-center label-divida title",attrs:{sm8:"",xs4:""}},[a._v("\n                  (=) Valor Renegociado\n                ")]),o("v-flex",{staticClass:"valor-divida title",attrs:{sm4:"",xs2:""}},[a._v("\n                  R$ "+a._s(a.formatValorMonetario(a.calculaValorRenegociado))+"\n                ")]),o("v-flex",{staticClass:"text-xs-center label-divida body-2",staticStyle:{"background-color":"#1b84b5","border-color":"#1b84b5",color:"#FFFFFF"},attrs:{sm12:"",xs12:""}},[a._v("\n                  Condições de parcelamento\n                ")]),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs4:""}},[a._v("\n                  Cobrar TAC na primeira fatura de\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[o("v-text-field",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,reverse:"",suffix:"R$",type:"tel"},model:{value:a.form.valorTacPrimeiraFatura,callback:function(t){a.$set(a.form,"valorTacPrimeiraFatura",t)},expression:"form.valorTacPrimeiraFatura"}})],1),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs4:""}},[a._v("\n                  Taxa de Juros Parcelamento de\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[o("v-text-field",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,reverse:"",prefix:"%",maxlength:"6",type:"tel"},model:{value:a.form.taxaJurosParcelamento,callback:function(t){a.$set(a.form,"taxaJurosParcelamento",t)},expression:"form.taxaJurosParcelamento"}})],1),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs4:""}},[a._v("\n                  Tarifa Boleto por Parcela\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[o("v-text-field",{directives:[{name:"money",rawName:"v-money",value:a.money,expression:"money"}],ref:"inputTarifaBoleto",staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,reverse:"",suffix:"R$",type:"tel"},model:{value:a.form.tarifaBoleto,callback:function(t){a.$set(a.form,"tarifaBoleto",t)},expression:"form.tarifaBoleto"}})],1),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm4:"",xs4:""}},[a._v("\n                  Cobrar pelo\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm8:"",xs2:""}},[o("v-autocomplete",{staticClass:"text-field-custom",attrs:{items:a.listaCedente,"background-color":a.bgcolor,reverse:"","item-text":"descricao","item-value":"id"},on:{change:a.changeCobrarCarne},model:{value:a.form.beneficiarioId,callback:function(t){a.$set(a.form,"beneficiarioId",t)},expression:"form.beneficiarioId"}})],1),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs4:""}},[a._v("\n                  Parcelar Em\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[o("v-text-field",{staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,rules:[a.rules.qtdMaxParcelas],reverse:"",type:"tel",prefix:"x",maxlength:"3"},on:{change:a.changeQtdParcelas},model:{value:a.form.qtdParcelas,callback:function(t){a.$set(a.form,"qtdParcelas",t)},expression:"form.qtdParcelas"}})],1),o("v-flex",{staticClass:"text-xs-center label-divida title",attrs:{sm8:"",xs4:""}},[a._v("\n                  Valor da(s) Parcela(s)\n                ")]),o("v-flex",{staticClass:"valor-divida title",attrs:{sm4:"",xs2:""}},[a._v("\n                  R$ "+a._s(a.formatValorMonetario(a.calculaValorParcelas))+"\n                ")]),o("v-flex",{staticClass:"text-xs-center label-divida body-2",attrs:{sm8:"",xs4:""}},[a._v("\n                  Primeiro Vencimento\n                ")]),o("v-flex",{staticClass:"valor-divida",attrs:{sm4:"",xs2:""}},[o("v-text-field",{staticClass:"text-field-custom",attrs:{"background-color":a.bgcolor,rules:[a.rules.qtdMaxDiasVencimento],type:"date",reverse:""},model:{value:a.form.dataVencimento,callback:function(t){a.$set(a.form,"dataVencimento",t)},expression:"form.dataVencimento"}})],1)],1)],1)],1)],1),o("v-divider",{staticClass:"mt-4"}),o("v-layout",{staticClass:"justify-end"},[o("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:a.goBack}},[a._v("Voltar")]),o("v-spacer"),o("v-btn",{attrs:{loading:a.loadingBtn,color:"primary"},on:{click:function(t){a.validaNovaRenegociacao()}}},[a._v("Confirmar")])],1),[o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-dialog",{attrs:{"max-width":"390"},model:{value:a.dialogConfirma,callback:function(t){a.dialogConfirma=t},expression:"dialogConfirma"}},[o("v-card",[o("v-card-title",{staticClass:"headline"},[a._v("Confirma Renegociação")]),o("v-card-text",[o("p",[a._v("Confirma a renegocição da dívida?")])]),o("v-card-actions",[o("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:function(t){a.dialogConfirma=!1}}},[a._v("Cancelar")]),o("v-spacer"),o("v-btn",{attrs:{color:"primary"},on:{click:function(t){a.confirmarNovaRenegociacao()}}},[a._v("Confirmar")])],1)],1)],1)],1)]],2)],1)],1)],1)},r=[],s=o("3a86"),l=o("65e0"),i=o("fa1c"),c=o("5a50"),n={props:{value:{type:Object,required:!0},dadosAcordo:{type:Object,required:!0},divida:{type:Object,required:!0},goBack:{type:Function,requided:!0},finalizar:{type:Function,requided:!0}},data:function(){var a=this;return{money:c["i"],bgcolor:"rgba(0, 0, 0, 0.06)",loading:!1,loadingBtn:!1,novaRenegociacao:!1,dialogConfirma:!1,rules:{maxDescontoAtraso:function(t){return!(t&&l["a"].convertStringToNumber(t)>a.dadosAcordo.regra.peMaxDescontoAtrasoAcordo)||'<div class="bg-erro">Máximo percentual desconto é '+a.formatValorMonetario(a.dadosAcordo.regra.peMaxDescontoAtrasoAcordo)+"% </div>"},qtdMaxParcelas:function(t){return!(t&&l["a"].convertStringToNumber(t)>a.dadosAcordo.regra.parcelaAcordoEmAte)||'<div class="bg-erro">Qtde Máxima de parcelas é '+a.formatValorMonetario(a.dadosAcordo.regra.parcelaAcordoEmAte)+"</div>"},qtdMaxDiasVencimento:function(t){return!(t&&i["a"].diffDate(t,new Date)>a.dadosAcordo.regra.qtdDiasVencimentoEntradaAcordo)||'<div class="bg-erro">Qtde Máxima de dias para entrada é '+a.dadosAcordo.regra.qtdDiasVencimentoEntradaAcordo+"</div>"}},form:{totalDivida:0,totalDescontoAcordo:0,peDescontoValorAtraso:0,totalDescontoValorAtraso:0,peDescontoMultaJuros:0,totalDescontoMultaJuros:0,valorEntrada:"0",tarifaBoleto:"0",tarifaServico:"0",outrosAcrescimos:"0",valorTacPrimeiraFatura:"0",taxaJurosParcelamento:"0",beneficiarioId:0,qtdParcelas:"1",valorRenegociado:0,valorParcela:0,carnesIds:[],maiorAtraso:0,dataVencimento:i["a"].currentDate()},headersEfetuadas:[{sortable:!1,text:"Data Acordo"},{sortable:!1,align:"right",text:"Total da Dívida"},{sortable:!1,align:"right",text:"Desconto Acordo"},{sortable:!1,align:"right",text:"Taxa Juros"},{sortable:!1,align:"right",text:"Entrada Acordo"},{sortable:!1,align:"right",text:"Outros Acréscimos"},{sortable:!1,align:"right",text:"Tarifa Acordo"},{sortable:!1,align:"right",text:"Valor Renegociado"},{sortable:!1,align:"center",text:"Parcelas"},{sortable:!1,align:"center",text:"Valor Parcela"},{sortable:!1,align:"center",text:"Fim Acordo"},{sortable:!1,align:"center",text:"Termo Confissão"},{sortable:!1,align:"center",text:"Carnê Renegociado"},{align:"center",sortable:!1,text:"Cancelar"}],items:[],totalItems:null,listaCedente:[],datasVencimento:[],possuiDividaParaRenegociar:!1}},computed:{calculaDescontoAtraso:function(){return l["a"].calculaDescontoPercentual(this.divida.valorAtraso,this.form.peDescontoValorAtraso)},calculaDescontoJurosMulta:function(){return l["a"].calculaDescontoPercentual(this.divida.valorMultaJurosMora,this.form.peDescontoMultaJuros)},calculaTotalComDesconto:function(){return this.divida.valorTotal-(this.calculaDescontoJurosMulta+this.calculaDescontoAtraso)},calculaValorRenegociado:function(){var a=this.calculaTotalComDesconto;return a-=l["a"].convertStringToNumber(this.form.valorEntrada),a+=l["a"].convertStringToNumber(this.form.tarifaServico),a+=l["a"].convertStringToNumber(this.form.outrosAcrescimos),a},calculaValorParcelas:function(){var a=parseInt(this.form.qtdParcelas)*l["a"].convertStringToNumber(this.form.taxaJurosParcelamento),t=this.calculaValorRenegociado*a/100;t+=l["a"].convertStringToNumber(this.form.valorTacPrimeiraFatura);var o=(this.calculaValorRenegociado+t)/parseInt(this.form.qtdParcelas);return o+=l["a"].convertStringToNumber(this.form.tarifaBoleto),o}},watch:{value:function(){this.$emit("input",this.value)}},beforeMount:function(){var a=this;this.loading=!0,s["d"].findAll().then(function(t){a.listaCedente=t.data}).catch(function(t){a.$root.showErro(t.data)}).finally(function(){a.loading=!1}),this.form.peDescontoValorAtraso=this.formatValorMonetario(this.dadosAcordo.regra.peMaxDescontoAtrasoAcordo),this.form.qtdParcelas=""+this.dadosAcordo.regra.parcelaAcordoEmAte,this.form.valorTacPrimeiraFatura=this.formatValorMonetario(this.dadosAcordo.regra.vlTarifaParaAcordo),this.form.taxaJurosParcelamento=this.formatValorMonetario(this.dadosAcordo.regra.taxaJurosParcelaAcordo)},methods:{validaValorParcela:function(){var a=this.calculaValorParcelas;return a?!(l["a"].convertStringToNumber(a)<this.dadosAcordo.regra.vlMinParcelaAcordo)||'<div class="bg-erro">Valor mínimo da parcela é R$ '+this.formatValorMonetario(this.dadosAcordo.regra.vlMinParcelaAcordo)+"</div>":'<div class="bg-erro">Informe um valor para parcela</div>'},changeQtdParcelas:function(){this.form.valorParcela=this.formatValorMonetario(this.calculaValorParcelas)},validaNovaRenegociacao:function(){this.form.totalDivida=this.formatValorMonetario(this.divida.valorTotal),this.form.maiorAtraso=this.dadosAcordo.diasAtraso,this.form.totalDescontoAcordo=this.formatValorMonetario(this.form.totalDescontoValorAtraso+this.form.totalDescontoMultaJuros),this.form.valorRenegociado=this.formatValorMonetario(this.calculaValorRenegociado),this.form.valorParcela=this.formatValorMonetario(this.calculaValorParcelas),this.form.carnesIds=this.dadosAcordo.selected.map(function(a){return a.carneId}),this.dialogConfirma=!0},confirmarNovaRenegociacao:function(){var a=this;this.dialogConfirma=!1,this.loading=!0,s["x"].efetuaRenegociacao(this.value.id,this.value.lojaId,this.form).then(function(t){a.$root.showSucesso(t.data),a.loading=!1,a.finalizar()}).catch(function(t){a.$root.showErro(t.data),a.loading=!1})},formatValorMonetario:function(a){return l["a"].formatValorMonetario(a)},changeCobrarCarne:function(a){var t=this.listaCedente.filter(function(t){return t.id===a})[0];"EM_LOJA"!==t.banco&&"NO_CARTAO"!==t.banco?this.form.tarifaBoleto=this.formatValorMonetario(this.dadosAcordo.vlTarifaParcelaBanco):this.form.tarifaBoleto="0",this.$refs.inputTarifaBoleto.$el.getElementsByTagName("input")[0].value=this.form.tarifaBoleto}}},d=n,v=(o("2236"),o("84eb"),o("2877")),m=Object(v["a"])(d,e,r,!1,null,"7d96a675",null);t["default"]=m.exports},"84eb":function(a,t,o){"use strict";o("c546")},c546:function(a,t,o){}}]);
//# sourceMappingURL=chunk-4d3d.1971f703.js.map