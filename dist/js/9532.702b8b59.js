(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["9532"],{9532:function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("v-container",{attrs:{fluid:"","grid-list-md":""}},[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{md12:""}},[o("material-card",{attrs:{color:"primary",title:"Pesquisar Lotes de RPS"}},[o("v-card",{staticClass:"elevation-0"},[o("v-card-text",[o("v-form",[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{md12:""}},[o("core-filtro-rede-empresa-loja",{attrs:{"hidden-loja":"","show-todas":""},model:{value:t.filtros,callback:function(a){t.filtros=a},expression:"filtros"}})],1),o("v-flex",{attrs:{md3:""}},[o("v-autocomplete",{attrs:{items:t.situacoes,label:"Situação","item-value":"id","item-text":"descricao"},model:{value:t.filtros.situacao,callback:function(a){t.$set(t.filtros,"situacao",a)},expression:"filtros.situacao"}})],1),o("v-flex",{attrs:{md3:""}},[o("v-text-field",{attrs:{label:"Protocolo",type:"text"},model:{value:t.filtros.protocolo,callback:function(a){t.$set(t.filtros,"protocolo","string"===typeof a?a.trim():a)},expression:"filtros.protocolo"}})],1),o("v-flex",{attrs:{md3:""}},[o("v-text-field",{attrs:{label:"Período Inicial",type:"date"},model:{value:t.filtros.dataInicial,callback:function(a){t.$set(t.filtros,"dataInicial",a)},expression:"filtros.dataInicial"}})],1),o("v-flex",{attrs:{md3:""}},[o("v-text-field",{attrs:{label:"Período Final",type:"date"},model:{value:t.filtros.dataFinal,callback:function(a){t.$set(t.filtros,"dataFinal",a)},expression:"filtros.dataFinal"}})],1)],1)],1)],1),o("v-card-actions",[o("v-spacer"),o("v-btn",{attrs:{loading:t.loadingBtn,color:"primary"},on:{click:t.pesquisar}},[t._v("Pesquisar")])],1)],1)],1)],1),o("v-flex",{attrs:{md12:""}},[o("v-card",[o("v-toolbar",{attrs:{flat:"",color:"white"}},[o("v-toolbar-title",[t._v("Lotes RPS")]),o("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),o("v-spacer"),o("v-btn",{attrs:{small:"",fab:"",color:"primary"}},[o("v-icon",{on:{click:function(a){t.newItem()}}},[t._v("mdi-plus")])],1)],1),o("v-progress-linear",{attrs:{active:t.loading,color:"light-blue",indeterminate:"",height:"3"}}),o("v-data-table",{staticClass:"elevation-1 arrow-pagintion",attrs:{headers:t.headers,items:t.items,loading:!0,"total-items":t.totalItems,pagination:t.pagination},on:{"update:pagination":function(a){t.pagination=a}},scopedSlots:t._u([{key:"items",fn:function(a){var e=a.item;return[o("td",{staticClass:"text-xs-center"},[t._v(t._s(e.loteId))]),o("td",[t._v(t._s(e.razaoSocial))]),e.dhEnvio?o("td",[t._v(t._s(t._f("moment")(e.dhEnvio,"DD/MM/YYYY H:mm")))]):o("td",[t._v(t._s("-"))]),e.dhRecebimento?o("td",[t._v(t._s(t._f("moment")(e.dhRecebimento,"DD/MM/YYYY H:mm")))]):o("td",[t._v(t._s("-"))]),o("td",[t._v(t._s(e.protocolo))]),o("td",[o("core-status-rps",{attrs:{status:e.situacaoStr,mensagem:e.correcaoErro}})],1),e.linkNota?o("td",{staticClass:"text-xs-center"},[o("a",{attrs:{href:e.linkNota,target:"_blank"}},[o("v-icon",{attrs:{color:"primary",title:"Download Nota Fiscal"}},[t._v("mdi-cloud-download-outline")])],1)]):o("td",{staticClass:"text-xs-center"},[t._v("-")]),o("td",{staticClass:"justify-end layout ma-2"},[o("v-icon",{staticClass:"mr-2",attrs:{color:"primary",title:"Visualizar RPS"},on:{click:function(a){t.visualizarLoteRps(e)}}},[t._v("mdi-magnify")])],1)]}}])})],1)],1)],1)],1)},i=[],s=o("3a86"),l=o("5a50"),r={metaInfo:{titleTemplate:"%s - RPS"},data:function(){return{dialog:!1,item:null,pagination:{rowsPerPage:15},selected:[],situacoes:[],filtros:{redeId:l["k"],empresaId:l["k"],lojaId:l["k"],situacao:l["k"],protocolo:null,dataInicial:null,dataFinal:null},search:"",headers:[{sortable:!1,text:"Lote",value:"loteId",align:"center"},{sortable:!1,text:"Loja",value:"razaoSocial"},{sortable:!1,text:"Enviado em",value:"dhEnvio"},{sortable:!1,text:"Processado em",value:"dhRecebimento"},{sortable:!1,text:"Protocolo",value:"protocolo"},{sortable:!1,text:"Situação",value:"situacaoStr"},{sortable:!1,text:"Nota Fiscal",value:"notaFiscal",align:"center"},{sortable:!1,text:"",value:""}],items:[],totalItems:null,loading:!1,loadingBtn:!1}},watch:{pagination:{handler:function(){this.paginar()}}},beforeMount:function(){var t=this;s["C"].getAllSituacaoRps().then(function(a){t.situacoes=a.data})},mounted:function(){this.reload()},methods:{reload:function(){},newItem:function(){this.$router.push("/rps-cadastro")},visualizarLoteRps:function(t){this.$router.push("/rps-cadastro/".concat(t.loteId))},pesquisar:function(){this.loadingBtn=!0,this.paginar()},paginar:function(){var t=this;this.loading=!0,this.loadingBtn=!0,s["A"].paginationLote(this.pagination.rowsPerPage,this.pagination.page-1,this.pagination.sortBy||"dhEnvio",this.filtros).then(function(a){t.items=a.data.content[0]["lotes"],t.totalItems=a.data.content[0]["qtdItems"]}).finally(function(){t.loading=!1,t.loadingBtn=!1})}}},n=r,c=o("2877"),d=Object(c["a"])(n,e,i,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=9532.702b8b59.js.map