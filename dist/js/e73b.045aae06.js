(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["e73b"],{e73b:function(e,a,t){"use strict";t.r(a);var l=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-container",{attrs:{fluid:"","grid-list-md":""}},[t("core-progress-modal",{attrs:{show:e.loading}}),e.loading?e._e():t("v-form",{ref:"form2",attrs:{"lazy-validation":""},on:{submit:function(a){return a.preventDefault(),e.validateBeforeSubmit(a)}},model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{md12:""}},[t("v-alert",{attrs:{value:!e.value.permitirEnvioSPC,type:"warning"}},[t("span",{staticClass:"subheading"},[e._v("ATENÇÃO: Esse cliente NÃO vai ser enviado para SPC/SERASA.")])]),e.value.ultimoHistoricoSPC?t("v-alert",{attrs:{value:!0,type:"warning"}},[t("span",{staticClass:"subheading"},[e._v("\n              CLIENTE NO "+e._s(e.value.ultimoHistoricoSPC.servicoSPC)+" DESDE "+e._s(this.$moment(e.value.ultimoHistoricoSPC.dataCadastro).format("DD/MM/YYYY"))+".")])]):e._e()],1),t("v-flex",{attrs:{md12:""}},[t("v-expansion-panel",{attrs:{expand:""},model:{value:e.panel,callback:function(a){e.panel=a},expression:"panel"}},[t("v-expansion-panel-content",{key:0,staticClass:"primary"},[t("template",{slot:"actions"},[t("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-down")])],1),t("template",{slot:"header"},[t("span",{staticClass:"title white--text"},[e._v("Identificação")])]),t("v-card",{staticClass:"elevation-0"},[t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{md3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Nome"),"data-vv-name":"Nome",label:"Nome"},model:{value:e.value.nome,callback:function(a){e.$set(e.value,"nome",a)},expression:"value.nome"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["###.###.###-##"],expression:"['###.###.###-##']"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("CPF"),disabled:"",type:"text","data-vv-name":"CPF",label:"CPF"},model:{value:e.value.cpf,callback:function(a){e.$set(e.value,"cpf","string"===typeof a?a.trim():a)},expression:"value.cpf"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Núm. Identidade"),"data-vv-name":"Núm. Identidade",maxlength:"15",label:"Núm. Identidade"},model:{value:e.value.identidade,callback:function(a){e.$set(e.value,"identidade",a)},expression:"value.identidade"}})],1),t("v-flex",{attrs:{md1:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Órgão Emissor"),type:"text","data-vv-name":"Órgão Emissor",label:"Órgão Emissor"},model:{value:e.value.orgaoEmissor,callback:function(a){e.$set(e.value,"orgaoEmissor",a)},expression:"value.orgaoEmissor"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Data Emissão"),rules:[e.rulesDate.dataFutura],type:"date","data-vv-name":"Data Emissão",label:"Data Emissão"},model:{value:e.value.dataEmissao,callback:function(a){e.$set(e.value,"dataEmissao",a)},expression:"value.dataEmissao"}})],1),t("v-flex",{attrs:{md1:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("UF"),items:e.estados,"data-vv-name":"UF",label:"UF","item-text":"uf","item-value":"uf"},model:{value:e.value.uf,callback:function(a){e.$set(e.value,"uf",a)},expression:"value.uf"}})],1),t("v-flex",{attrs:{md1:""}},[t("v-text-field",{attrs:{label:"Grupo",type:"text",readonly:"",hint:"Preenchida automaticamente pelo motor de crédito"},model:{value:e.value.grupo,callback:function(a){e.$set(e.value,"grupo",a)},expression:"value.grupo"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Nascimento"),rules:[e.rulesDate.dataFutura],type:"date",label:"Nascimento","data-vv-name":"Nascimento"},model:{value:e.value.dataNascimento,callback:function(a){e.$set(e.value,"dataNascimento",a)},expression:"value.dataNascimento"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Estado Nascimento"),items:e.estados,"data-vv-name":"Estado Nascimento",label:"Estado Nascimento","item-text":"uf","item-value":"uf"},on:{change:e.changeEstadoNascimento},model:{value:e.value.naturalEstado,callback:function(a){e.$set(e.value,"naturalEstado",a)},expression:"value.naturalEstado"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Cidade Nascimento"),items:e.cidades,loading:e.loadingCidades,label:"Cidade Nascimento","data-vv-name":"Cidade Nascimento","item-text":"nome","item-value":"ibge"},model:{value:e.value.naturalCidade,callback:function(a){e.$set(e.value,"naturalCidade",a)},expression:"value.naturalCidade"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Sexo"),items:e.sexos,label:"Sexo","data-vv-name":"Sexo","item-value":"id","item-text":"descricao"},model:{value:e.value.sexo,callback:function(a){e.$set(e.value,"sexo",a)},expression:"value.sexo"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Estado Civil"),items:e.estadosCivil,label:"Estado Civil","data-vv-name":"Estado Civil","item-value":"id","item-text":"descricao"},model:{value:e.value.estadoCivil,callback:function(a){e.$set(e.value,"estadoCivil",a)},expression:"value.estadoCivil"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{attrs:{label:"Dependentes",type:"number",min:"0",reverse:""},model:{value:e.value.dependentes,callback:function(a){e.$set(e.value,"dependentes",a)},expression:"value.dependentes"}})],1),t("v-flex",{attrs:{md6:""}},[t("v-text-field",{attrs:{label:"Nome do Pai"},model:{value:e.value.nomePai,callback:function(a){e.$set(e.value,"nomePai",a)},expression:"value.nomePai"}})],1),t("v-flex",{attrs:{md6:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Nome da Mãe"),"data-vv-name":"Nome da Mãe",label:"Nome da Mãe"},model:{value:e.value.nomeMae,callback:function(a){e.$set(e.value,"nomeMae",a)},expression:"value.nomeMae"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:["(##) #### - ####","(##) ##### - ####"],expression:"['(##) #### - ####', '(##) ##### - ####']"}],attrs:{"error-messages":e.errors.collect("Tel. Residencial"),label:"Tel. Residencial","data-vv-name":"Tel. Residencial",hint:"<span class='body-2 red--text'>Caso o cliente não tenha telefone fixo, incluir o celular de familiar!</span>"},model:{value:e.value.telResidencial,callback:function(a){e.$set(e.value,"telResidencial",a)},expression:"value.telResidencial"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:["(##) #### - ####","(##) ##### - ####"],expression:"['(##) #### - ####', '(##) ##### - ####']"}],attrs:{"error-messages":e.errors.collect("Celular"),label:"Celular","data-vv-name":"Celular",hint:"<span class='body-2 red--text'>!Incluir o celular do cliente, qualquer informação será enviada para esse número!</span>"},model:{value:e.value.celular,callback:function(a){e.$set(e.value,"celular",a)},expression:"value.celular"}})],1),t("v-flex",{attrs:{md3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"error-messages":e.errors.collect("Email"),type:"email",label:"Email","data-vv-name":"Email",hint:"<span class='body-2 red--text'>!caso cliente não possua email, digitar nao@email.com.br</span>"},model:{value:e.value.email,callback:function(a){e.$set(e.value,"email",a)},expression:"value.email"}})],1),t("v-flex",{attrs:{md3:""}},[t("v-autocomplete",{attrs:{items:e.escolaridades,label:"Escolaridade","item-value":"id","item-text":"descricao"},model:{value:e.value.escolaridade,callback:function(a){e.$set(e.value,"escolaridade",a)},expression:"value.escolaridade"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"formata-moeda",rawName:"v-formata-moeda",value:e.value.rendaPrincipal,expression:"value.rendaPrincipal"},{name:"money",rawName:"v-money",value:e.money,expression:"money"}],attrs:{"error-messages":e.errors.collect("Renda Principal"),suffix:"R$",label:"Renda Principal",reverse:""},model:{value:e.value.rendaPrincipal,callback:function(a){e.$set(e.value,"rendaPrincipal",a)},expression:"value.rendaPrincipal"}})],1)],1)],1)],1)],2),e.editando&&!e.loadingResumo?t("v-expansion-panel-content",{key:1,staticClass:"primary mt-1"},[t("template",{slot:"actions"},[t("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-down")])],1),t("template",{slot:"header"},[t("span",{staticClass:"title white--text"},[e._v("Carteira do Cliente")])]),t("v-card",{staticClass:"elevation-0"},[t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Rede",value:e.resumoCliente.nomeRede}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Empresa",value:e.resumoCliente.nomeEmpresa}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Loja",value:e.resumoCliente.nomeLoja}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Data Assinatura",value:e._f("moment")(e.resumoCliente.dataAssinatura,"DD/MM/YYYY")}})],1),t("v-flex",{attrs:{md6:"",xs12:""}},[t("div",[t("span",{staticClass:"body-2"},[e._v("Situação do Contrato")]),t("br"),t("span",{staticClass:"body-1",domProps:{innerHTML:e._s(e.situacaoContrato(e.resumoCliente))}}),"NORMAL"===e.resumoCliente.status?t("v-btn",{staticClass:"ma-2",attrs:{color:"red",dark:""}},[e._v("\n\t\t\t\t\t\t\tBloquear\n\t\t\t\t\t\t  "),t("v-icon",{attrs:{dark:"",right:""},on:{click:e.bloquearCliente}},[e._v("\n\t\t\t\t\t\t  >\n\t\t\t\t\t\t  \tmdi-cancel\n       \t\t\t\t      ")])],1):e.$root.isAdminSup()?t("v-btn",{staticClass:"ma-2",attrs:{color:"primary",dark:""}},[e._v("\n\t\t\t\t\t\t\tDesbloquear\n\t\t\t\t\t\t  "),t("v-icon",{attrs:{dark:"",right:""},on:{click:e.desbloquearCliente}},[e._v("\n\t\t\t\t\t\t  >\n\t\t\t\t\t\t  \tmdi-checkbox-marked-circle\n       \t\t\t\t      ")])],1):e._e()],1)]),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[e.flagIncluir?e._e():t("core-label-value",{attrs:{label:"Limite Crédito Compartilhado Total",value:e.formatValorMonetario(e.value.limiteCompartilhado)}}),e.$root.isAdminSup()?t("v-icon",{attrs:{outline:"",color:"primary"},on:{click:e.incluirValor}},[e._v("\n\t\t\t\t\t\tmdi-pencil\n\t\t\t\t\t  ")]):e._e(),e.flagIncluir?[t("v-text-field",{directives:[{name:"money",rawName:"v-money",value:e.money,expression:"money"}],attrs:{"error-messages":e.errors.collect("Limite Crédito Compartilhado Total"),"data-vv-name":"Limite Crédito Compartilhado Total",prefix:"R$",label:"Limite Crédito Compartilhado Total"},model:{value:e.value.limiteCompartilhado,callback:function(a){e.$set(e.value,"limiteCompartilhado",a)},expression:"value.limiteCompartilhado"}}),t("v-btn",{attrs:{loading:e.loadingBtn,small:"",color:"primary",elevation:"5",dark:""},on:{click:e.alterarLimite}},[t("v-icon",{attrs:{dark:"",right:""}},[e._v("mdi-checkbox-marked")])],1),t("v-btn",{attrs:{small:"",color:"error",elevation:"5",dark:""},on:{click:e.cancelarValor}},[t("v-icon",{attrs:{dark:"",right:""}},[e._v("mdi-close-box")])],1)]:e._e()],2),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Limite Crédito Exclusivo Total",value:e.formatValorMonetario(e.resumoCliente.limiteExclusivo)}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Saldo Devedor Total",value:e.formatValorMonetario(e.resumoCliente.saldoDevedorTotal)}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Saldo Devedor no Mês",value:e.formatValorMonetario(e.resumoCliente.saldoDevedorMes)}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Saldo Disponível Compartilhado Total",value:e.formatValorMonetario(e.resumoCliente.limiteCompartilhadoDisponivel)}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Saldo Disponível Exclusivo Total",value:e.formatValorMonetario(e.resumoCliente.limiteExclusivoDisponivel)}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Última Compra em",value:e._f("moment")(e.resumoCliente.ultimaCompraEm,"DD/MM/YYYY")}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Total de Compras",value:e.totalCompras()}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Último Pagamento em",value:e._f("moment")(e.resumoCliente.ultimoPagamentoEm,"DD/MM/YYYY")}})],1),t("v-flex",{attrs:{md3:"",sm6:"",xs12:""}},[t("core-label-value",{attrs:{label:"Total de Pagamentos",value:e.totalPagamentos()}})],1),t("v-flex",{attrs:{md12:""}},[t("v-card",{staticClass:"elevation-0"},[t("v-card-title",[t("span",{staticClass:"title"},[e._v("Outras Contas do Cliente")])]),t("v-card-text",[t("v-data-table",{attrs:{headers:e.headersOutrasLojas,items:e.resumoOutrasLojas,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(a){var l=a.item;return[t("tr",[t("td",[t("span",{staticClass:"body-1"},[e._v(e._s(l.nomeLoja))])]),t("td",[t("span",{staticClass:"body-1",domProps:{innerHTML:e._s(e.situacaoContrato(l))}})]),t("td",{staticClass:"body-1 text-xs-right"},[t("span",{staticClass:"body-1"},[e._v(e._s(e.formatValorMonetario(l.saldoDevedorTotal)))])]),t("td",{staticClass:"body-1 text-xs-right"},[t("span",{staticClass:"body-1"},[e._v(e._s(e.formatValorMonetario(l.limiteCompartilhadoDisponível-l.limiteExclusivoDisponível)))])]),t("td",{staticClass:"body-1 text-xs-right"},[t("span",{staticClass:"body-1"},[e._v(e._s(e.formatValorMonetario(l.limiteExclusivo)))])]),t("td",{staticClass:"text-xs-right"},[t("v-icon",{staticClass:"mr-2",on:{click:function(a){e.visualizarCliente(l)}}},[e._v("\n                                    mdi-magnify\n                                  ")])],1)])]}}])})],1)],1)],1)],1)],1)],1)],2):e._e(),t("core-endereco",{attrs:{disabled:e.disabled,expanded:!e.cobranca,"class-panel":"mt-1"},model:{value:e.value.endereco,callback:function(a){e.$set(e.value,"endereco",a)},expression:"value.endereco"}},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{md3:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Tipo de Residência"),items:e.tiposResidencia,"data-vv-name":"Tipo de Residência",label:"Tipo de Residência","item-value":"id","item-text":"descricao"},model:{value:e.value.tipoResidencia,callback:function(a){e.$set(e.value,"tipoResidencia",a)},expression:"value.tipoResidencia"}})],1),t("v-flex",{attrs:{md3:""}},[t("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["##/####"],expression:"['##/####']"}],attrs:{rules:[e.rulesDesde.dataFutura],label:"Reside desde MM/AAAA"},model:{value:e.value.resideDesde,callback:function(a){e.$set(e.value,"resideDesde",a)},expression:"value.resideDesde"}})],1)],1)],1),e.cobranca?e._e():[t("v-expansion-panel-content",{key:2,staticClass:"primary mt-1"},[t("template",{slot:"actions"},[t("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-down")])],1),t("template",{slot:"header"},[t("span",{staticClass:"title white--text"},[e._v("Dados Profissionais")])]),t("v-card",{staticClass:"elevation-0"},[t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{md3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Empresa"),label:"Empresa","data-vv-name":"Empresa",hint:"<span class='body-2 red--text'>Cliente Autônomo ou Aposentado? Incluir nesse campo nome completo de parente próximo e no campo 'Tel. Comercial' telefone desse parente.</span>"},model:{value:e.value.empresa,callback:function(a){e.$set(e.value,"empresa",a)},expression:"value.empresa"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Cargo"),label:"Cargo","data-vv-name":"Cargo"},model:{value:e.value.cargo,callback:function(a){e.$set(e.value,"cargo",a)},expression:"value.cargo"}})],1),t("v-flex",{attrs:{md3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:["##/####"],expression:"['##/####']"}],attrs:{"error-messages":e.errors.collect("Trabalha Nessa Empresa desde MM/AAAA"),rules:[e.rulesDesde.dataFutura],label:"Trabalha Nessa Empresa desde MM/AAAA","data-vv-name":"Trabalha Nessa Empresa desde MM/AAAA"},model:{value:e.value.trabalhaNessaEmpresaDesde,callback:function(a){e.$set(e.value,"trabalhaNessaEmpresaDesde",a)},expression:"value.trabalhaNessaEmpresaDesde"}})],1),t("v-flex",{attrs:{md3:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:["(##) #### - ####","(##) ##### - ####"],expression:"['(##) #### - ####', '(##) ##### - ####']"}],attrs:{"error-messages":e.errors.collect("Tel. Comercial"),label:"Tel. Comercial","data-vv-name":"Tel. Comercial",hint:"<span class='body-2 red--text'>Cliente Assalariado: Incluir telefone da empresa que o cliente está trabalhando;\n                            <br/>\n                            <br/>Cliente Autônomo: Incluir telefone de alguma pessoa que o cliente presta ou prestou serviço ou familiar</span>"},model:{value:e.value.telComercial,callback:function(a){e.$set(e.value,"telComercial",a)},expression:"value.telComercial"}})],1),t("v-flex",{attrs:{md1:""}},[t("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["####"],expression:"['####']"}],attrs:{label:"Ramal"},model:{value:e.value.ramal,callback:function(a){e.$set(e.value,"ramal",a)},expression:"value.ramal"}})],1)],1)],1)],1)],2)],t("v-expansion-panel-content",{key:3,staticClass:"primary mt-1"},[t("template",{slot:"actions"},[t("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-down")])],1),t("template",{slot:"header"},[t("span",{staticClass:"title white--text"},[e._v("Referências Pessoais")])]),t("v-card",{staticClass:"elevation-0"},[t("v-card-text",[t("span",{staticClass:"caption"},[e._v("\n                    Referência Pessoal 1 e 2: Incluir nome completo  e telefone de pessoas próximas (preferencialmente familiares).\n                  ")]),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{md8:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Nome"),label:"Nome","data-vv-name":"Nome"},model:{value:e.value.nomeRef1,callback:function(a){e.$set(e.value,"nomeRef1",a)},expression:"value.nomeRef1"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Relação"),items:e.tiposReferenciasPessoais,"data-vv-name":"Relação",label:"Relação","item-value":"id","item-text":"descricao"},model:{value:e.value.relacaoRef1,callback:function(a){e.$set(e.value,"relacaoRef1",a)},expression:"value.relacaoRef1"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:["(##) #### - ####","(##) ##### - ####"],expression:"['(##) #### - ####', '(##) ##### - ####']"}],attrs:{"error-messages":e.errors.collect("Telefone Contato"),label:"Telefone Contato","data-vv-name":"Telefone Contato"},model:{value:e.value.telRef1,callback:function(a){e.$set(e.value,"telRef1",a)},expression:"value.telRef1"}})],1),t("v-flex",{attrs:{md8:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Nome"),"data-vv-name":"Nome",label:"Nome"},model:{value:e.value.nomeRef2,callback:function(a){e.$set(e.value,"nomeRef2",a)},expression:"value.nomeRef2"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-autocomplete",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":e.errors.collect("Relação"),items:e.tiposReferenciasPessoais,label:"Relação","data-vv-name":"Relação","item-value":"id","item-text":"descricao"},model:{value:e.value.relacaoRef2,callback:function(a){e.$set(e.value,"relacaoRef2",a)},expression:"value.relacaoRef2"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"},{name:"mask",rawName:"v-mask",value:["(##) #### - ####","(##) ##### - ####"],expression:"['(##) #### - ####', '(##) ##### - ####']"}],attrs:{"error-messages":e.errors.collect("Telefone Contato"),label:"Telefone Contato","data-vv-name":"Telefone Contato"},model:{value:e.value.telRef2,callback:function(a){e.$set(e.value,"telRef2",a)},expression:"value.telRef2"}})],1),t("v-flex",{attrs:{md8:""}},[t("v-text-field",{attrs:{label:"Nome"},model:{value:e.value.nomeRef3,callback:function(a){e.$set(e.value,"nomeRef3",a)},expression:"value.nomeRef3"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-autocomplete",{attrs:{items:e.tiposReferenciasPessoais,label:"Relação","item-value":"id","item-text":"descricao"},model:{value:e.value.relacaoRef3,callback:function(a){e.$set(e.value,"relacaoRef3",a)},expression:"value.relacaoRef3"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["(##) #### - ####","(##) ##### - ####"],expression:"['(##) #### - ####', '(##) ##### - ####']"}],attrs:{label:"Telefone Contato"},model:{value:e.value.telRef3,callback:function(a){e.$set(e.value,"telRef3",a)},expression:"value.telRef3"}})],1),t("v-flex",{attrs:{md8:""}},[t("v-text-field",{attrs:{label:"Nome"},model:{value:e.value.nomeRef4,callback:function(a){e.$set(e.value,"nomeRef4",a)},expression:"value.nomeRef4"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-autocomplete",{attrs:{items:e.tiposReferenciasPessoais,label:"Relação","item-value":"id","item-text":"descricao"},model:{value:e.value.relacaoRef4,callback:function(a){e.$set(e.value,"relacaoRef4",a)},expression:"value.relacaoRef4"}})],1),t("v-flex",{attrs:{md2:""}},[t("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:["(##) #### - ####","(##) ##### - ####"],expression:"['(##) #### - ####', '(##) ##### - ####']"}],attrs:{label:"Telefone Contato"},model:{value:e.value.telRef4,callback:function(a){e.$set(e.value,"telRef4",a)},expression:"value.telRef4"}})],1)],1)],1)],1)],2),e.$root.isAdmin()&&!e.cobranca?[t("v-expansion-panel-content",{key:4,staticClass:"primary mt-1"},[t("template",{slot:"actions"},[t("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-down")])],1),t("template",{slot:"header"},[t("span",{staticClass:"title white--text"},[e._v("Permissão de Envio ao SPC/SERASA")])]),t("v-card",{staticClass:"elevation-0"},[t("v-card-text",[t("v-checkbox",{attrs:{label:"Permitir o envio do cliente para SPC/SERASA"},model:{value:e.value.permitirEnvioSPC,callback:function(a){e.$set(e.value,"permitirEnvioSPC",a)},expression:"value.permitirEnvioSPC"}})],1)],1)],2)]:e._e(),!e.cobranca&&e.editando?[t("v-expansion-panel-content",{key:5,staticClass:"primary mt-1"},[t("template",{slot:"actions"},[t("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-down")])],1),t("template",{slot:"header"},[t("span",{staticClass:"title white--text"},[e._v("Observações")])]),t("v-card",{staticClass:"elevation-0"},[t("v-toolbar",{attrs:{flat:"",color:"white"}},[t("v-toolbar-title",[e._v("Observações")]),t("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t("v-spacer"),t("v-btn",{attrs:{small:"",fab:"",color:"primary"}},[t("v-icon",{on:{click:function(a){e.novaObservacao()}}},[e._v("mdi-plus")])],1)],1),t("v-card-text",[t("v-data-table",{attrs:{headers:e.headersObs,items:e.observacoes,"hide-actions":""},scopedSlots:e._u([{key:"items",fn:function(a){var l=a.item;return[t("tr",[t("td",{staticClass:"text-xs-center"},[e._v(e._s(e._f("moment")(l.dataCadastro,"DD/MM/YYYY")))]),t("td",[e._v(e._s(l.descricao))])])]}}])})],1)],1)],2)]:e._e(),e.$root.isRolesPratico()?[t("v-expansion-panel-content",{key:7,staticClass:"primary mt-1"},[t("template",{slot:"actions"},[t("v-icon",{attrs:{color:"white"}},[e._v("mdi-chevron-down")])],1),t("template",{slot:"header"},[t("span",{staticClass:"title white--text"},[e._v("Cruzar Dados")])]),t("cliente-cruzar-dados",{attrs:{expanded:!0},model:{value:e.value,callback:function(a){e.value=a},expression:"value"}})],2)]:e._e(),[e._t("default")]],2)],1),e.cobranca?e._e():t("v-flex",{attrs:{md12:""}},[t("v-layout",{staticClass:"justify-end"},[t("v-btn",{attrs:{dark:""},on:{click:e.goBack}},[e._v(e._s(e.editando?"Sair":"Voltar"))]),t("v-btn",{attrs:{disabled:!e.valid,loading:e.loadingBtn,type:"submit",color:"primary"}},[e._v(e._s(e.editando?"Salvar":"Continuar"))])],1)],1)],1)],1),[t("v-layout",{attrs:{row:"","justify-center":""}},[t("v-dialog",{attrs:{"max-width":"390"},model:{value:e.flagAddObs,callback:function(a){e.flagAddObs=a},expression:"flagAddObs"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v("Nova Observação")]),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{md12:""}},[t("v-textarea",{attrs:{label:"Observação",counter:"",maxlength:"250"},model:{value:e.observacao,callback:function(a){e.observacao=a},expression:"observacao"}})],1),t("v-flex",{attrs:{md12:""}},[t("v-layout",{staticClass:"justify-end"},[t("v-btn",{attrs:{color:"primary"},on:{click:e.salvarObservacao}},[e._v("Salvar")])],1)],1)],1)],1)],1)],1)],1)],[t("v-layout",{attrs:{row:"","justify-center":""}},[t("v-dialog",{attrs:{"max-width":"390"},model:{value:e.dialogLimiteCredito,callback:function(a){e.dialogLimiteCredito=a},expression:"dialogLimiteCredito"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v("Limite de Crédito Pré-Aprovado")]),t("v-card-text",[t("v-spacer"),e.value.limitesPreAprovado?t("p",{staticClass:"title"},[t("span",{staticClass:"subheading"},[e._v("Primeira compra autorizada em")]),e._v("\n                "+e._s("R$ "+e.value.limitesPreAprovado.faixaFinal3.toLocaleString("pt-BR",{minimumFractionDigits:2}))+"\n                "),t("span",{staticClass:"subheading"},[e._v("com entrada de ")]),e._v("\n                "+e._s(" R$ "+(e.value.limitesPreAprovado.faixaFinal3*(e.value.limitesPreAprovado.peEntrada3/100)).toLocaleString("pt-BR",{minimumFractionDigits:2})+" ("+e.value.limitesPreAprovado.peEntrada3.toLocaleString("pt-BR",{minimumFractionDigits:2})+"%)")+"\n              ")]):e._e()],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary"},on:{click:function(a){e.dialogLimiteCredito=!1}}},[e._v("Ok")])],1)],1)],1)],1)]],2)},s=[],o=t("3a86"),i=t("5a50"),r=t("65e0"),n=t("fa1c"),d=function(){return t.e("43b9").then(t.bind(null,"43b9"))},v={components:{ClienteCruzarDados:d},props:{value:{type:Object,required:!0},setData:{type:Function,requided:!0},nextStep:{type:Function},goBack:{type:Function},disabled:!1,editando:!1,cobranca:{type:Boolean,required:!1,default:!1}},data:function(){return{panel:[!0,!0,!0,!0,!0,!0,!0],loading:!1,loadingResumo:!1,loadingResumoOutrasLojas:!1,valid:!0,sexos:[],estadosCivil:[],escolaridades:[],tiposResidencia:[],tiposReferenciasPessoais:[],estados:[],cidades:[],observacoes:[],loadingCidades:!1,money:i["i"],loadingBtn:!1,flagAddObs:!1,flagIncluir:!1,observacao:null,dialogLimiteCredito:!1,resumoCliente:null,resumoOutrasLojas:[],hoje:this.$moment().format("YYYY-MM-DD"),formCobranca:{dataAgendamento:null,tipoOcorrencia:null,dtAgendamento:null,horaAgendamento:null},alteraStatus:0,tiposOcorrencia:[],ocorrenciasCobranca:[],totalOcorrencias:0,paginationCobranca:{rowsPerPage:15},rulesDate:{dataFutura:function(e){return n["a"].validaDataFutura(e)}},rulesDesde:{dataFutura:function(e){return!!n["a"].validaDesdeMMYYYY(e)||"O período tem que ser menor que a data atual"}},headersObs:[{sortable:!1,text:"Data",value:"data"},{sortable:!1,text:"Observação",value:"observacao",align:"left",width:"100%"}],headersOutrasLojas:[{sortable:!1,text:"Nome Loja",value:"nomeLoja"},{sortable:!1,text:"Situação",value:"situacao",align:"left"},{sortable:!1,text:"Saldo Devedor",align:"right",value:"saldoDevedor",width:"20%"},{sortable:!1,text:"Saldo Disponível",align:"right",value:"saldoDisponivel"},{sortable:!1,text:"Limite Exclusivo",align:"right",value:"limiteExclusivo"}]}},watch:{value:function(){this.$emit("input",this.value)},paginationCobranca:{handler:function(){this.paginarCobranca()}}},beforeMount:function(){this.editando||this.value.id||this.cobranca||(this.dialogLimiteCredito=!0),this.reload(),this.cobranca&&(this.panel=[!0,!0,!1,!0,!0,!0])},methods:{validateBeforeSubmit:function(){var e=this,a=this;this.$validator.validate().then(function(t){if(t){if(r["a"].convertStringToNumber(a.value.rendaPrincipal)<100)return void e.$root.showAlerta('A Renda Principal deve ser de no mínimo <span class="title">R$ 100,00</span>');e.validaTelefones()?(e.loadingBtn=!0,o["h"].salvar(e.value).then(function(a){e.$root.showSucesso("Dados enviados com sucesso"),e.setData(a.data),e.nextStep()}).catch(function(){return e.$root.showErro("Erro ao cadastrar cliente")}).finally(function(){e.loadingBtn=!1})):e.$root.showAlerta("Todos os telefones informados precisam ser diferentes.")}else e.$root.showAlerta(e.$vuetify.t("$vuetify.Erro.camposObrigatorios"))})},validaTelefones:function(){return this.value.telResidencial!==this.value.celular&&this.value.telResidencial!==this.value.telRef1&&this.value.telResidencial!==this.value.telRef2&&this.value.celular!==this.value.telRef1&&this.value.celular!==this.value.telRef2&&this.value.telRef1!==this.value.telRef2},cancelar:function(){this.$router.push("/lista-cliente")},alterarLimite:function(){var e=this;this.loadingBtn=!0,o["h"].alterarLimite(this.value.id,this.value.limiteCompartilhado).then(function(a){e.$root.showSucesso(a.data),e.flagIncluir=!1,e.reload()}).catch(function(a){e.$root.showErro(a.data)}).finally(function(){e.loadingBtn=!1})},bloquearCliente:function(){var e=this;this.loadingBtn=!0,o["h"].alterarStatus(this.value.id,this.value.lojaId,"BLOQUEADO").then(function(a){e.$root.showSucesso(a.data),e.reload()}).catch(function(a){e.$root.showErro(a.data)}).finally(function(){e.loadingBtn=!1})},desbloquearCliente:function(){var e=this;this.loadingBtn=!0,o["h"].alterarStatus(this.value.id,this.value.lojaId,"NORMAL").then(function(a){e.$root.showSucesso(a.data),e.reload()}).catch(function(a){e.$root.showErro(a.data)}).finally(function(){e.loadingBtn=!1})},reload:function(){var e=this;this.loading=!0,o["C"].getAllSexo().then(function(a){e.sexos=a.data}),o["C"].getAllEstadoCivil().then(function(a){e.estadosCivil=a.data}),o["C"].getAllEscolaridade().then(function(a){e.escolaridades=a.data}),o["C"].getAllTipoResidencia().then(function(a){e.tiposResidencia=a.data}),o["C"].getAllTipoReferenciaPessoal().then(function(a){e.tiposReferenciasPessoais=a.data}),o["m"].findAll().then(function(a){e.estados=a.data}).catch(function(){return e.$root.showAlerta("Não foi possível buscar as informações de estado")}),this.carregarCidades(this.value.naturalEstado),this.editando?(this.loadResumoCliente(),this.loadResumoClienteOutrasLojas()):this.loading=!1,this.loadObservacoes(),this.loadingBtn=!1},carregarCidades:function(e){var a=this;this.value.naturalEstado=e,this.value.naturalEstado&&(this.loadingCidades=!0,o["m"].getCidadesByUf(this.value.naturalEstado).then(function(e){a.cidades=e.data}).catch(function(){a.$root.showAlerta("Não foi possível buscar as informações das cidades")}).finally(function(){a.loadingCidades=!1}))},changeEstadoNascimento:function(e){console.log("changeEstadoNascimento"),this.carregarCidades(e),this.value.naturalCidade=null},novaObservacao:function(){this.observacao=null,this.flagAddObs=!0},cancelarValor:function(){this.loadingBtn=!0,this.flagIncluir=!1,this.loadingBtn=!1},incluirValor:function(){this.loadingBtn=!0,this.flagIncluir=!0,this.loadingBtn=!1},salvarObservacao:function(){var e=this,a={descricao:this.observacao};this.loading=!0,o["h"].inserirObservacao(this.value.id,a).then(function(a){e.loadObservacoes(),e.flagAddObs=!1}).catch(function(a){e.$root.showErro(a.data),e.loading=!1})},loadResumoCliente:function(){var e=this;this.loadingResumo=!0,o["h"].loadResumoCliente(this.value.id,this.value.lojaId).then(function(a){e.resumoCliente=a.data,e.loadingResumo=!1}).catch(function(a){e.$root.showErro(a.data),e.loadingResumo=!1})},loadResumoClienteOutrasLojas:function(){var e=this;this.loadingResumoOutrasLojas=!0,o["h"].loadResumoClienteOutrasLojas(this.value.id,this.value.lojaId).then(function(a){e.resumoOutrasLojas=a.data}).catch(function(a){e.$root.showErro(a.data),e.loadingResumoOutrasLojas=!1})},situacaoContrato:function(e){var a="";if(e.atrasoDias&&(a+="EM ATRASO desde "+this.$moment(e.atrasoVencto).format("DD/MM/YYYY")+" ("+e.atrasoDias+" dias) <br> "),e.status){var t=e.status;"NORMAL"===t&&(t='<span class="green--text">NORMAL</span>'),"BLOQUEADO"===t&&(t='<span class="red--text">BLOQUEADO</span>'),a+=t+" desde "+this.$moment(e.dataStatus).format("DD/MM/YYYY")+"<br>"}return e.maiorAtrasoAteHojeDias&&(a+="MAIOR ATRASO ATÉ HOJE: "+e.maiorAtrasoAteHojeDias+" dia(s) - vencto "+this.$moment(e.maiorAtrasoAteHojeVencto).format("DD/MM/YYYY")+"<br>"),e.maiorAtrasoPrim12mesesDias&&(a+="MAIOR ATRASO PRIM. 12 MESES: "+e.maiorAtrasoPrim12mesesDias+" dia(s) - vencto "+this.$moment(e.maiorAtrasoPrim12mesesVencto).format("DD/MM/YYYY")),a},totalCompras:function(){return this.resumoCliente.qtdTotalCompras?this.resumoCliente.qtdTotalCompras+" compras(s) no total de "+this.formatValorMonetario(this.resumoCliente.vlTotalCompras):"0"},totalPagamentos:function(){return this.resumoCliente.qtdTotalPagamentos?this.resumoCliente.qtdTotalPagamentos+" pagto(s) no total de "+this.formatValorMonetario(this.resumoCliente.vlTotalPagamentos):"0"},formatValorMonetario:function(e){return"R$ "+r["a"].formatValorMonetario(e)},loadObservacoes:function(){var e=this;this.loading=!0,o["h"].getAllObservacao(this.value.id).then(function(a){e.observacoes=a.data}).finally(function(){e.loading=!1})},visualizarCliente:function(e){this.cobranca?this.$router.push("/cliente-cobranca/".concat(e.clienteId,"/").concat(e.lojaId)):this.$router.push("/cad-cliente/".concat(e.clienteId,"/").concat(e.lojaId)),this.loading=!0,window.location.reload()}}},c=v,u=t("2877"),m=Object(u["a"])(c,l,s,!1,null,null,null);a["default"]=m.exports}}]);
//# sourceMappingURL=e73b.045aae06.js.map