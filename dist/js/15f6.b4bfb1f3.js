(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["15f6"],{"15f6":function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("material-card",{attrs:{color:"primary",title:"Pagamentos Carnê do Cliente"}},[e("v-form",{attrs:{novalidate:""},on:{submit:function(t){return t.preventDefault(),a.pesquisar(t)}}},[e("v-card",{staticClass:"elevation-0"},[e("v-card-text",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("core-filtro-rede-empresa-loja",{attrs:{obrigatorio:!0},model:{value:a.filtros,callback:function(t){a.filtros=t},expression:"filtros"}})],1),e("v-flex",{attrs:{md4:""}},[e("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{"error-messages":a.errors.collect("CPF"),"data-vv-name":"CPF",label:"CPF"},model:{value:a.filtros.cpf,callback:function(t){a.$set(a.filtros,"cpf",t)},expression:"filtros.cpf"}})],1),e("v-flex",{attrs:{md4:""}},[e("v-autocomplete",{attrs:{items:a.statusParcelas,"item-value":"id","item-text":"descricao",label:"Status",clearable:""},model:{value:a.filtros.status,callback:function(t){a.$set(a.filtros,"status",t)},expression:"filtros.status"}})],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{loading:a.loadingBtn,color:"primary",type:"submit"}},[a._v("Pesquisar")])],1)],1)],1)],1)],1),e("v-flex",{attrs:{md12:""}},[e("v-card",[e("v-toolbar",{attrs:{flat:"",color:"white"}},[e("v-toolbar-title",[a._v("PAGAMENTOS DE CARNÊS")]),e("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),e("v-spacer"),a.temItemSelecionado?e("v-btn",{attrs:{color:"primary"},on:{click:a.openDialogPagarSelecionados}},[a._v("\n              Pagar Parcelas Selecionadas\n            ")]):a._e()],1),e("v-progress-linear",{attrs:{active:a.loading,color:"light-blue",indeterminate:"",height:"3"}}),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.items,"total-items":a.totalItems,pagination:a.pagination,"rows-per-page-items":a.pagination.rowsPerPageItems,"rows-per-page-text":a.pagination.rowsPerPageText,"item-key":"id"},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"items",fn:function(t){var o=t.item;return[e("tr",{attrs:{active:o.selected}},[e("td",["Em Aberto"==o.status?e("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:o.selected,callback:function(t){a.$set(o,"selected",t)},expression:"item.selected"}}):a._e()],1),e("td",{staticClass:"text-xs-center"},[a._v(a._s(a._f("moment")(o.dataVencimento,"DD/MM/YYYY")))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(0===o.numero?"Entrada":o.numero))]),e("td",[a._v(a._s(o.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})))]),("Pago"==o.status||o.flgCancelado)&&o.valorMulta?e("td",[a._v(a._s(o.valorMulta.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",[a._v("-")]),("Pago"==o.status||o.flgCancelado)&&o.valorJurosMora?e("td",[a._v(a._s(o.valorJurosMora.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",[a._v("-")]),("Pago"==o.status||o.flgCancelado)&&o.desconto?e("td",[a._v(a._s(o.desconto.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",[a._v("-")]),("Pago"==o.status||o.flgCancelado)&&o.valorPago?e("td",[a._v(a._s(o.valorPago.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",[a._v("-")]),o.dataPagto?e("td",{staticClass:"text-xs-center"},[a._v(a._s(a._f("moment")(o.dataPagto,"DD/MM/YYYY")))]):e("td",[a._v("-")]),e("td",[a._v(a._s(o.localPagto))]),e("td",{staticClass:"text-xs-center"},[e("core-status-pagamento",{attrs:{status:o.status,"motivo-cancelamento":o.motivoCancelamento}})],1),e("td",{staticClass:"text-xs-center"},["Em Aberto"==o.status?e("v-btn",{attrs:{color:"primary"},on:{click:function(t){a.openDialogPagar(o)}}},[a._v("\n                    Pagar\n                  ")]):a._e(),"Pago"==o.status&&o.podeCancelar&&0!==o.numero?e("v-btn",{attrs:{outline:"",color:"error"},on:{click:function(t){a.openDialogCancelar(o)}}},[a._v("\n                    Cancelar Pagamento\n                  ")]):a._e()],1),e("td",{staticClass:"text-xs-center"},["Pago"==o.status||o.flgCancelado?e("v-icon",{on:{click:function(t){a.openRecibo(o)}}},[a._v("mdi-receipt")]):a._e()],1)])]}}])})],1)],1),a.dialogPagar?[e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"400"},model:{value:a.dialogPagar,callback:function(t){a.dialogPagar=t},expression:"dialogPagar"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[a._v("Pagar Parcela")]),e("v-card-text",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("v-text-field",{attrs:{label:"Vencimento",type:"date",box:"",readonly:""},model:{value:a.itemSelecionado.dataVencimento,callback:function(t){a.$set(a.itemSelecionado,"dataVencimento",t)},expression:"itemSelecionado.dataVencimento"}})],1),e("v-flex",{attrs:{md12:""}},[e("v-text-field",{directives:[{name:"formata-moeda",rawName:"v-formata-moeda",value:a.itemSelecionado.valor,expression:"itemSelecionado.valor"},{name:"money",rawName:"v-money",value:a.money,expression:"money"}],attrs:{box:"",readonly:"",type:"tel",prefix:"R$",label:"Valor Original"},model:{value:a.itemSelecionado.valor,callback:function(t){a.$set(a.itemSelecionado,"valor",t)},expression:"itemSelecionado.valor"}})],1),e("v-flex",{attrs:{md12:""}},[e("v-text-field",{directives:[{name:"formata-moeda",rawName:"v-formata-moeda",value:a.itemSelecionado.valorMulta,expression:"itemSelecionado.valorMulta"},{name:"money",rawName:"v-money",value:a.money,expression:"money"}],attrs:{box:"",readonly:"",type:"tel",prefix:"R$",label:"Multa [ + ]"},model:{value:a.itemSelecionado.valorMulta,callback:function(t){a.$set(a.itemSelecionado,"valorMulta",t)},expression:"itemSelecionado.valorMulta"}})],1),e("v-flex",{attrs:{md12:""}},[e("v-text-field",{directives:[{name:"formata-moeda",rawName:"v-formata-moeda",value:a.itemSelecionado.valorJurosMora,expression:"itemSelecionado.valorJurosMora"},{name:"money",rawName:"v-money",value:a.money,expression:"money"}],attrs:{box:"",readonly:"",type:"tel",prefix:"R$",label:"Juros Mora [ + ]"},model:{value:a.itemSelecionado.valorJurosMora,callback:function(t){a.$set(a.itemSelecionado,"valorJurosMora",t)},expression:"itemSelecionado.valorJurosMora"}})],1),e("v-flex",{attrs:{md12:""}},[e("v-text-field",{directives:[{name:"formata-moeda",rawName:"v-formata-moeda",value:a.itemSelecionado.desconto,expression:"itemSelecionado.desconto"},{name:"money",rawName:"v-money",value:a.money,expression:"money"}],attrs:{box:"",readonly:"",type:"tel",prefix:"R$",label:"Desconto [ - ] "},model:{value:a.itemSelecionado.desconto,callback:function(t){a.$set(a.itemSelecionado,"desconto",t)},expression:"itemSelecionado.desconto"}})],1),e("v-flex",{attrs:{md12:""}},[a.$root.isAdmin()?e("v-text-field",{directives:[{name:"formata-moeda",rawName:"v-formata-moeda",value:a.itemSelecionado.valorPago,expression:"itemSelecionado.valorPago"},{name:"money",rawName:"v-money",value:a.money,expression:"money"}],attrs:{box:"",type:"tel",prefix:"R$",label:"Valor a Pagar"},model:{value:a.itemSelecionado.valorPago,callback:function(t){a.$set(a.itemSelecionado,"valorPago",t)},expression:"itemSelecionado.valorPago"}}):e("embed",{attrs:{readonly:""}})],1)],1)],1),e("v-card-actions",[e("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:a.closeDialogPagar}},[a._v("Cancelar")]),e("v-spacer"),e("v-btn",{attrs:{loading:a.loadingBtn,color:"primary"},on:{click:a.confirmarPagamento}},[a._v("Confirmar Pagamento")])],1)],1)],1)],1)]:a._e(),a.dialogCancelar?[e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"390"},model:{value:a.dialogCancelar,callback:function(t){a.dialogCancelar=t},expression:"dialogCancelar"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[a._v("Cancelar Pagamento")]),e("v-card-text",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("v-alert",{attrs:{value:!0,type:"warning"}},[e("span",[a._v("Essa operação não poderá ser desfeita.")])])],1),e("v-flex",{attrs:{md12:""}},[e("v-textarea",{attrs:{label:"Informe o motivo do cancelamento"},model:{value:a.itemSelecionado.motivo,callback:function(t){a.$set(a.itemSelecionado,"motivo",t)},expression:"itemSelecionado.motivo"}})],1)],1)],1),e("v-card-actions",[e("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:a.closeDialogCancelar}},[a._v("Cancelar")]),e("v-spacer"),e("v-btn",{attrs:{loading:a.loadingBtn,color:"red"},on:{click:a.confirmarCancelar}},[a._v("Confirmar")])],1)],1)],1)],1)]:a._e(),a.dialogPagarSelecionados?[e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"600"},model:{value:a.dialogPagarSelecionados,callback:function(t){a.dialogPagarSelecionados=t},expression:"dialogPagarSelecionados"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[a._v("Pagar Várias Parcelas")]),e("v-card-text",[a.loading?e("v-container",{attrs:{fluid:"","fill-height":""}},[e("core-progress-modal",{attrs:{show:a.loading}})],1):e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headersSelecionados,items:a.itemsSelecionado,"item-key":"id","hide-actions":""},scopedSlots:a._u([{key:"items",fn:function(t){var o=t.item;return[e("td",{staticClass:"text-xs-center"},[a._v(a._s(a._f("moment")(o.dataVencimento,"DD/MM/YYYY")))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(o.numero))]),e("td",[a._v(a._s(o.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})))]),o.valorMulta?e("td",[a._v(a._s(o.valorMulta.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",[a._v("-")]),o.valorJurosMora?e("td",[a._v(a._s(o.valorJurosMora.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",[a._v("-")]),e("td",{staticClass:"text-xs-right"},[a._v(a._s(o.valorPago.toLocaleString("pt-BR",{minimumFractionDigits:2})))])]}}])},[e("template",{slot:"footer"},[e("td",{attrs:{colspan:a.headersSelecionados.length-1}},[e("span",{staticClass:"title"},[a._v("Total a ser pago")])]),e("td",{staticClass:"text-xs-right"},[e("span",{staticClass:"title"},[a._v(a._s(a.totalApagarParcelasSelecionadas.toLocaleString("pt-BR",{minimumFractionDigits:2})))])])])],2)],1),e("v-card-actions",[e("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:a.closeDialogPagarSelecionados}},[a._v("Cancelar")]),e("v-spacer"),e("v-btn",{attrs:{loading:a.loadingBtn,color:"primary"},on:{click:a.confirmarPagamentoSelecionados}},[a._v("Confirmar Pagamento")])],1)],1)],1)],1)]:a._e(),a.dialogRecibo?e("cliente-recibo-pagamento",{attrs:{"pagamento-id":a.pagamentoId,show:a.dialogRecibo,close:a.closeRecibo}}):a._e()],2)],1)},i=[],l=e("5530"),n=e("3a86"),r=e("5a50"),s=function(){return e.e("chunk-2e0c").then(e.bind(null,"560e"))},c={components:{ClienteReciboPagamento:s},data:function(){return{selected:[],money:r["i"],statusParcelas:[],dialogCancelar:!1,dialogPagar:!1,dialogRecibo:!1,dialogPagarSelecionados:!1,pagination:{rowsPerPage:15,rowsPerPageItems:r["j"]},filtros:{redeId:null,empresaId:null,lojaId:null,dataInicial:null,dataFinal:null,status:null,cpf:null},headersSelecionados:[{sortable:!1,text:"Vencimento",align:"center",value:"dataVencimento"},{sortable:!1,text:"Parc.",align:"center",value:"numero"},{sortable:!1,text:"Valor Original",value:"valorParcela"},{sortable:!1,text:"Multa",value:"valorMulta"},{sortable:!1,text:"Juros Mora",value:"valorJurosMora"},{sortable:!1,text:"Valor a ser pago",value:"valorPago"}],headers:[{sortable:!1,text:""},{sortable:!1,text:"Vencimento",align:"center",value:"dataVencimento"},{sortable:!1,text:"Parc.",align:"center",value:"numero"},{sortable:!1,text:"Valor Original",value:"valorParcela"},{sortable:!1,text:"Multa",value:"valorMulta"},{sortable:!1,text:"Juros Mora",value:"valorJurosMora"},{sortable:!1,text:"Desconto",value:"desconto"},{sortable:!1,text:"Valor Pago",value:"valorPago"},{sortable:!1,text:"Data Pagto",align:"center",value:"dataPagto"},{sortable:!1,text:"Local Pagto",value:"nomeLoja"},{sortable:!1,text:"Status",align:"center",value:"status"},{sortable:!1,text:"Ações",align:"center"},{sortable:!1,text:"Recibo",align:"center"}],items:[],totalItems:null,loading:!1,loadingBtn:!1,itemSelecionado:null,pagamentoId:null}},computed:{itemsSelecionado:function(){var a=this;return this.items.filter(function(a){return a.selected}).map(function(t){return t.lojaId=a.filtros.lojaId,t.valorPago||(t.valorPago=t.valor),t})},temItemSelecionado:function(){return this.itemsSelecionado.length>0},totalApagarParcelasSelecionadas:function(){return this.itemsSelecionado.map(function(a){return a.valorPago}).reduce(function(a,t){return a+t})}},watch:{pagination:{handler:function(){this.paginar()}}},beforeMount:function(){var a=this;n["C"].getAllStatusParcela().then(function(t){a.statusParcelas=t.data})},methods:{closeDialogPagar:function(){this.dialogPagar=!1,this.itemSelecionado=null},closeDialogCancelar:function(){this.dialogCancelar=!1,this.itemSelecionado=null},closeRecibo:function(){this.dialogRecibo=!1,this.pagamentoId=null},confirmarCancelar:function(){var a=this;this.itemSelecionado.motivo?(this.loading=!0,this.loadingBtn=!0,n["E"].cancelarPagamento({id:this.itemSelecionado.pagamentoId,motivo:this.itemSelecionado.motivo,lojaId:this.itemSelecionado.lojaId,usuarioId:this.$root.usuarioId()}).then(function(t){a.$root.showSucesso(t.data),a.paginar(),a.closeDialogCancelar()}).catch(function(t){a.$root.showErro(t.data),a.loading=!1,a.loadingBtn=!1})):this.$root.showAlerta("Informe o motivo do cancelamento")},confirmarPagamento:function(){var a=this;if(this.loading=!0,this.loadingBtn=!0,this.itemSelecionado.valorPago<this.itemSelecionado.valor)return this.$root.showAlerta("Valor pago nao pode ser menor que o valor da parcela"),void(this.loadingBtn=!1);n["E"].pagarParcela(this.itemSelecionado).then(function(t){a.$root.showSucesso("Parcela paga com sucesso"),a.paginar(),a.closeDialogPagar()}).catch(function(t){a.$root.showErro(t.data.message),a.loading=!1,a.loadingBtn=!1})},openDialogCancelar:function(a){this.dialogCancelar=!0,this.setItemSelecionado(a)},openDialogPagar:function(a){this.dialogPagar=!0,this.setItemSelecionado(a)},openRecibo:function(a){this.pagamentoId=a.pagamentoId,this.dialogRecibo=!0},setItemSelecionado:function(a){this.itemSelecionado=Object(l["a"])({},a),this.itemSelecionado.lojaId=this.filtros.lojaId,this.itemSelecionado.dataVencimento=this.$moment(this.itemSelecionado.dataVencimento).format("YYYY-MM-DD"),this.itemSelecionado.dataPagto&&(this.itemSelecionado.dataPagto=this.$moment(this.itemSelecionado.dataPagto).format("YYYY-MM-DD")),this.itemSelecionado.valorPago||(this.itemSelecionado.valorPago=this.itemSelecionado.valor)},reload:function(){},pesquisar:function(){var a=this;this.$validator.validate().then(function(t){t&&a.filtros.lojaId?(a.loadingBtn=!0,a.paginar()):a.$root.showAlerta(a.$vuetify.t("$vuetify.Erro.camposObrigatorios"))})},paginar:function(){var a=this;this.filtros.cpf&&(this.loading=!0,n["h"].parcelasCliente(this.pagination.rowsPerPage,this.pagination.page-1,this.pagination.sortBy||"dataVencimento",this.filtros.cpf,this.filtros).then(function(t){a.items=t.data.content,a.totalItems=t.data.totalElements}).catch(function(t){a.$root.showErro(t.data.message)}).finally(function(){a.loadingBtn=!1,a.loading=!1}))},openDialogPagarSelecionados:function(){this.dialogPagarSelecionados=!0},closeDialogPagarSelecionados:function(){this.dialogPagarSelecionados=!1},confirmarPagamentoSelecionados:function(){var a=this;this.loading=!0,this.loadingBtn=!0;var t=this.itemsSelecionado.map(function(a){return a.valor=a.valor.toLocaleString("pt-BR",{minimumFractionDigits:2}),a.valorPago=a.valorPago.toLocaleString("pt-BR",{minimumFractionDigits:2}),a.desconto&&(a.desconto=a.desconto.toLocaleString("pt-BR",{minimumFractionDigits:2})),a.valorJurosMora&&(a.valorJurosMora=a.valorJurosMora.toLocaleString("pt-BR",{minimumFractionDigits:2})),a.valorMulta&&(a.valorMulta=a.valorMulta.toLocaleString("pt-BR",{minimumFractionDigits:2})),a});n["E"].pagarListaParcela(t).then(function(){a.$root.showSucesso("Parcela paga com sucesso"),a.paginar(),a.closeDialogPagarSelecionados()}).catch(function(a){self.$root.showErro(a.data.message)}).finally(function(){a.loading=!1,a.loadingBtn=!1})}}},d=c,m=e("2877"),v=Object(m["a"])(d,o,i,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=15f6.b4bfb1f3.js.map