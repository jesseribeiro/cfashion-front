{"version":3,"sources":["webpack:///./src/views/relatorios/RelClientes.vue?fb19","webpack:///src/views/relatorios/RelClientes.vue","webpack:///./src/views/relatorios/RelClientes.vue?c56e","webpack:///./src/views/relatorios/RelClientes.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fluid","grid-list-md","ref","on","submit","$event","preventDefault","validateBeforeSubmit","row","wrap","md12","staticClass","show-todas","model","value","callback","$$v","filtros","expression","md4","directives","name","rawName","items","tipos","error-messages","errors","collect","data-vv-name","label","item-value","item-text","$set","md2","type","md1","_v","tiposRel","loading","loadingBtn","color","show","id","src","filePDF","width","height","_e","staticRenderFns","RelClientesvue_type_script_lang_js_","metaInfo","titleTemplate","data","redeId","empresaId","lojaId","tipoLancamentoId","tipoRel","dataInicio","dataFim","beforeMount","_this","push","constants","descricao","business","getAllTiposRelatorio","then","response","tiposLancamentoRepasse","concat","methods","_this2","$validator","validate","result","geraRelatorioCliente","window","URL","createObjectURL","url","Blob","link","document","createElement","href","setAttribute","headers","split","body","appendChild","click","catch","erro","$root","showErro","$vuetify","t","finally","showAlerta","relatorios_RelClientesvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/aef7.d334d5c2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-md\":\"\"}},[_c('v-form',{ref:\"form2\",on:{\"submit\":function($event){$event.preventDefault();return _vm.validateBeforeSubmit($event)}}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('v-card',{staticClass:\"elevation-0\"},[_c('v-card-text',[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('core-filtro-rede-empresa-loja',{attrs:{\"show-todas\":true},model:{value:(_vm.filtros),callback:function ($$v) {_vm.filtros=$$v},expression:\"filtros\"}})],1),_c('v-flex',{attrs:{\"md4\":\"\"}},[_c('v-autocomplete',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required'),expression:\"'required'\"}],attrs:{\"items\":_vm.tipos,\"error-messages\":_vm.errors.collect('Tipo'),\"data-vv-name\":\"Tipo\",\"label\":\"Tipo\",\"item-value\":\"id\",\"item-text\":\"descricao\"},model:{value:(_vm.filtros.tipoLancamentoId),callback:function ($$v) {_vm.$set(_vm.filtros, \"tipoLancamentoId\", $$v)},expression:\"filtros.tipoLancamentoId\"}})],1),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Data Inicial\",\"type\":\"date\"},model:{value:(_vm.filtros.dataInicio),callback:function ($$v) {_vm.$set(_vm.filtros, \"dataInicio\", $$v)},expression:\"filtros.dataInicio\"}})],1),_c('v-flex',{attrs:{\"md1\":\"\"}},[_c('span',{staticClass:\"layout fill-height align-center justify-center\"},[_vm._v(\"a\")])]),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Data Final\",\"type\":\"date\"},model:{value:(_vm.filtros.dataFim),callback:function ($$v) {_vm.$set(_vm.filtros, \"dataFim\", $$v)},expression:\"filtros.dataFim\"}})],1),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-autocomplete',{attrs:{\"items\":_vm.tiposRel,\"label\":\"Relatório em\",\"item-value\":\"id\",\"item-text\":\"descricao\"},model:{value:(_vm.filtros.tipoRel),callback:function ($$v) {_vm.$set(_vm.filtros, \"tipoRel\", $$v)},expression:\"filtros.tipoRel\"}})],1)],1)],1)],1)],1),_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('v-layout',{staticClass:\"justify-end\"},[_c('v-btn',{attrs:{\"loading\":_vm.loadingBtn,\"type\":\"submit\",\"color\":\"primary\"}},[_vm._v(\"Gerar\")])],1)],1),_c('core-progress-modal',{attrs:{\"show\":_vm.loading}}),(_vm.filePDF)?_c('embed',{attrs:{\"id\":\"plugin\",\"src\":_vm.filePDF,\"width\":\"100%\",\"height\":\"1000px\",\"name\":\"plugin\",\"type\":\"application/pdf\"}}):_vm._e()],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container\r\n    fluid\r\n    grid-list-md>\r\n    <v-form\r\n      ref=\"form2\"\r\n      @submit.prevent=\"validateBeforeSubmit\">\r\n      <v-layout\r\n        row\r\n        wrap>\r\n        <v-flex md12>\r\n          <v-card class=\"elevation-0\">\r\n            <v-card-text>\r\n              <v-layout\r\n                row\r\n                wrap>\r\n                <v-flex md12>\r\n                  <core-filtro-rede-empresa-loja\r\n                    v-model=\"filtros\"\r\n                    :show-todas=\"true\"\r\n                  />\r\n                </v-flex>\r\n                <v-flex md4>\r\n                  <v-autocomplete\r\n                    v-validate=\"'required'\"\r\n                    v-model=\"filtros.tipoLancamentoId\"\r\n                    :items=\"tipos\"\r\n                    :error-messages=\"errors.collect('Tipo')\"\r\n                    data-vv-name=\"Tipo\"\r\n                    label=\"Tipo\"\r\n                    item-value=\"id\"\r\n                    item-text=\"descricao\"\r\n                  />\r\n                </v-flex>\r\n                <v-flex md2>\r\n                  <v-text-field\r\n                    v-model=\"filtros.dataInicio\"\r\n                    label=\"Data Inicial\"\r\n                    type=\"date\"\r\n                  />\r\n                </v-flex>\r\n                <v-flex md1>\r\n                  <span class=\"layout fill-height align-center justify-center\">a</span>\r\n                </v-flex>\r\n                <v-flex md2>\r\n                  <v-text-field\r\n                    v-model=\"filtros.dataFim\"\r\n                    label=\"Data Final\"\r\n                    type=\"date\"\r\n                  />\r\n                </v-flex>\r\n                <v-flex md2>\r\n                  <v-autocomplete\r\n                    v-model=\"filtros.tipoRel\"\r\n                    :items=\"tiposRel\"\r\n                    label=\"Relatório em\"\r\n                    item-value=\"id\"\r\n                    item-text=\"descricao\"\r\n                  />\r\n                </v-flex>\r\n              </v-layout>\r\n            </v-card-text>\r\n          </v-card>\r\n        </v-flex>\r\n        <v-flex md12>\r\n          <v-layout class=\"justify-end\">\r\n            <v-btn\r\n              :loading=\"loadingBtn\"\r\n              type=\"submit\"\r\n              color=\"primary\">Gerar</v-btn>\r\n          </v-layout>\r\n        </v-flex>\r\n        <core-progress-modal :show=\"loading\" />\r\n\r\n        <embed\r\n          v-if=\"filePDF\"\r\n          id=\"plugin\"\r\n          :src=\"filePDF\"\r\n          width=\"100%\"\r\n          height=\"1000px\"\r\n          name=\"plugin\"\r\n          type=\"application/pdf\">\r\n      </v-layout>\r\n    </v-form>\r\n  </v-container>\r\n</template>\r\n\r\n<script>\r\nimport { TiposBusiness, RelatorioBusiness } from '../../business'\r\nimport { TODAS_ID } from '../../constants'\r\n\r\nexport default {\r\n  metaInfo: {\r\n    titleTemplate: '%s - Relatório'\r\n  },\r\n  data () {\r\n    return {\r\n      filtros: {\r\n        redeId: null,\r\n        empresaId: null,\r\n        lojaId: null,\r\n        tipoLancamentoId: null,\r\n        tipoRel: 'PDF',\r\n        dataInicio: null,\r\n        dataFim: null\r\n      },\r\n      filePDF: null,\r\n      tiposRel: [],\r\n      tipos: [],\r\n      loadingBtn: false,\r\n      loading: false\r\n    }\r\n  },\r\n  beforeMount () {\r\n    this.tipos.push({ id: TODAS_ID, descricao: 'Todos Lançamentos' })\r\n    TiposBusiness.getAllTiposRelatorio()\r\n      .then(response => {\r\n        this.tiposRel = response.data\r\n      })\r\n    TiposBusiness.tiposLancamentoRepasse()\r\n      .then(response => {\r\n        this.tipos = this.tipos.concat(response.data)\r\n      })\r\n  },\r\n  methods: {\r\n    validateBeforeSubmit () {\r\n      this.$validator.validate().then(result => {\r\n        if (result && !!this.filtros.redeId && !!this.filtros.empresaId && !!this.filtros.lojaId) {\r\n          this.loading = true\r\n          this.loadingBtn = true\r\n          RelatorioBusiness.geraRelatorioCliente(this.filtros)\r\n            .then(response => {\r\n              if (this.filtros.tipoRel === 'PDF') {\r\n                this.filePDF = window.URL.createObjectURL(response.data)\r\n              } else {\r\n                const url = window.URL.createObjectURL(new Blob([response.data]))\r\n                const link = document.createElement('a')\r\n                link.href = url\r\n                link.setAttribute('download', response.headers['content-disposition'].split(';')[1].split('=')[1])\r\n                document.body.appendChild(link)\r\n                link.click()\r\n              }\r\n            /*  let tipo = this.filtros.tipo === 'PDF' ? 'application/pdf' : 'application/vnd.ms-excel'\r\n              let nameFile = this.filtros.tipo === 'PDF' ? 'relatorio_lancto_extra.pdf' : 'relatorio_lancto_extra.xls'\r\n              // For IE using atob convert base64 encoded data to byte array\r\n              if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n                var byteCharacters = atob(response.data)\r\n                var byteNumbers = new Array(byteCharacters.length)\r\n                for (var i = 0; i < byteCharacters.length; i++) {\r\n                  byteNumbers[i] = byteCharacters.charCodeAt(i)\r\n                }\r\n                var byteArray = new Uint8Array(byteNumbers)\r\n                var blob = new Blob([byteArray], {\r\n                  type: tipo\r\n                })\r\n                window.navigator.msSaveOrOpenBlob(blob, nameFile)\r\n              } else {\r\n                if (this.filtros.tipo === 'PDF') {\r\n                  this.filePDF = 'data:application/pdf;base64,' + response.data\r\n                } else {\r\n                  this.filePDF = 'data:application/vnd.ms-excel;base64,' + response.data\r\n                }\r\n              }\r\n              */\r\n            })\r\n            .catch(erro => this.$root.showErro(this.$vuetify.t('$vuetify.Erro.carregarRelatorio')))\r\n            .finally(() => {\r\n              this.loading = false\r\n              this.loadingBtn = false\r\n            })\r\n        } else {\r\n          this.$root.showAlerta(this.$vuetify.t('$vuetify.Erro.camposObrigatorios'))\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelClientes.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RelClientes.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./RelClientes.vue?vue&type=template&id=ac264dd6&\"\nimport script from \"./RelClientes.vue?vue&type=script&lang=js&\"\nexport * from \"./RelClientes.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}