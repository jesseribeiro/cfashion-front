(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-729b","65e0","65e0"],{"65e0":function(a,t,e){"use strict";e("a481"),e("c5f6");t["a"]={convertStringToNumber:function(a){return a?Number(a.replaceAll(".","").replace(",",".").replace(/[^0-9.-]+/g,"")):0},calculaDescontoPercentual:function(a,t){if(t){var e=this.convertStringToNumber(t)/100;return console.log("percentualCalculado: "+e),console.log("valorBase: "+a),console.log("multiplicado: "+a*e),a*e}return 0},formatValorMonetario:function(a){return a?a.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):"0,00"}}},d4ec:function(a,t,e){"use strict";function o(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}e.d(t,"a",function(){return o})},eef5:function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("core-progress-modal",{attrs:{show:a.loading}}),a.loading?a._e():e("v-tabs",{attrs:{centered:"",color:"primary",dark:"","icons-and-text":""}},[e("v-tabs-slider",{attrs:{color:"white"}}),e("v-tab",{attrs:{href:"#dados-cliente"}},[a._v("\n      Dados Cliente\n      "),e("v-icon",[a._v("mdi-card-account-details")])],1),e("v-tab",{attrs:{href:"#carnes"}},[a._v("\n      Carnês\n      "),e("v-icon",[a._v("mdi-animation")])],1),e("v-tab",{attrs:{href:"#pagamentos"}},[a._v("\n      Pagamentos\n      "),e("v-icon",[a._v("mdi-cash-multiple")])],1),a.$root.isRolesPratico()?e("v-tab",{attrs:{href:"#spc"}},[a._v("\n      SPC\n      "),e("v-icon",[a._v("mdi-account-off-outline")])],1):a._e(),a.$root.isRolesPratico()?e("v-tab",{attrs:{href:"#renegociar"}},[a._v("\n      Renegociar Dívida\n      "),e("v-icon",[a._v("mdi-handshake")])],1):a._e(),e("v-tab-item",{attrs:{value:"dados-cliente"}},[e("cliente-dados",{attrs:{value:a.form,"set-data":a.setData,editando:!0,cobranca:!0}},[a.$root.isRolesPratico()?[e("v-expansion-panel-content",{key:99,staticClass:"primary mt-1"},[e("template",{slot:"actions"},[e("v-icon",{attrs:{color:"white"}},[a._v("mdi-chevron-down")])],1),e("template",{slot:"header"},[e("span",{staticClass:"title white--text"},[a._v("Procedimentos de Cobrança")])]),e("v-card",{staticClass:"elevation-0"},[e("v-data-table",{staticClass:"elevation-1 arrow-pagintion",attrs:{headers:a.headers,items:a.items,"total-items":a.totalItems,pagination:a.pagination},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"items",fn:function(t){var o=t.item;return[e("td",{staticClass:"text-xs-center"},[a._v(a._s(a._f("moment")(o.atrasoDesde,"DD/MM/YYYY")))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(a._f("moment")(o.dataCobranca,"DD/MM/YYYY H:mm")))]),e("td",[a._v(a._s(o.usuario))]),e("td",{staticClass:"text-xs-right"},[a._v(a._s(o.diasAtraso))]),e("td",{staticClass:"text-xs-right"},[a._v(a._s(a.formatValorMonetario(o.vlAtrasoOriginal)))]),e("td",[a._v(a._s(o.tipoOcorrencia))]),e("td",[a._v(a._s(o.observacao))]),e("td",{staticClass:"justify-end layout ma-2"},[o.id?e("v-icon",{staticClass:"mr-2",attrs:{color:"blue",title:"Editar dados da cliente"},on:{click:function(t){a.openEditarOcorrencia(o)}}},[a._v("mdi-pencil")]):a._e()],1)]}}])}),e("v-card-text",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("span",{staticClass:"body-2"},[a._v("Procedimento:")]),a._v(" "+a._s(a.formCobranca.procedimentoCobranca)+" agendado para "+a._s(a._f("moment")(a.formCobranca.dataAgendamento,"DD/MM/YYYY"))+"\n                  ")]),e("v-flex",{attrs:{md3:""}},[e("v-autocomplete",{attrs:{items:a.tiposOcorrencia,label:"Ocorrência","item-value":"id","item-text":"descricao"},model:{value:a.formCobranca.tipoOcorrenciaId,callback:function(t){a.$set(a.formCobranca,"tipoOcorrenciaId",t)},expression:"formCobranca.tipoOcorrenciaId"}})],1),e("v-flex",{staticClass:"mt-0 mr-1",attrs:{md3:"",layout:"","align-center":""}},[e("v-text-field",{attrs:{type:"date",label:"Data Agendamento",reverse:""},model:{value:a.formCobranca.dataAgendamento,callback:function(t){a.$set(a.formCobranca,"dataAgendamento",t)},expression:"formCobranca.dataAgendamento"}}),e("span",{staticClass:"ml-4 mr-4"},[a._v("às")]),e("v-text-field",{attrs:{type:"time",label:"Horário",reverse:""},model:{value:a.formCobranca.horaAgendamento,callback:function(t){a.$set(a.formCobranca,"horaAgendamento",t)},expression:"formCobranca.horaAgendamento"}})],1),e("v-flex",{attrs:{md6:""}},[e("v-textarea",{attrs:{type:"text",label:"Observação"},model:{value:a.formCobranca.observacao,callback:function(t){a.$set(a.formCobranca,"observacao",t)},expression:"formCobranca.observacao"}})],1)],1)],1)],1)],2)]:a._e()],2),e("v-layout",{staticClass:"justify-end mr-4"},[a.isFila?[e("v-btn",{attrs:{loading:a.loading,color:"primary"},on:{click:function(t){a.salvarOcorrencia()}}},[a._v("Próximo")]),e("v-btn",{attrs:{loading:a.loading,color:"secondary"},on:{click:function(t){a.pularCliente()}}},[a._v("Pular Cliente")]),e("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:function(t){a.cancelarFilaCobranca()}}},[a._v("Sair")])]:[e("v-btn",{attrs:{loading:a.loading,color:"primary"},on:{click:function(t){a.salvarOcorrencia()}}},[a._v("Agendar")]),e("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:function(t){a.cancelarCobranca()}}},[a._v("Sair")])]],2)],1),e("v-tab-item",{attrs:{value:"carnes"}},[e("cliente-carnes",{attrs:{value:a.form}})],1),e("v-tab-item",{attrs:{value:"pagamentos"}},[e("cliente-pagamentos",{attrs:{value:a.form}})],1),a.$root.isRolesPratico()?e("v-tab-item",{attrs:{value:"spc"}},[e("cliente-SPC",{attrs:{value:a.form}})],1):a._e(),a.$root.isRolesPratico()?e("v-tab-item",{attrs:{value:"renegociar"}},[e("cliente-renegociar",{attrs:{value:a.form}})],1):a._e()],1),a.dialogEditOcorrencia?[e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{"max-width":"390"},model:{value:a.dialogEditOcorrencia,callback:function(t){a.dialogEditOcorrencia=t},expression:"dialogEditOcorrencia"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[a._v("Atualizar Observação")]),e("v-card-text",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("v-textarea",{attrs:{label:"Observação",counter:"",maxlength:"500"},model:{value:a.item.observacao,callback:function(t){a.$set(a.item,"observacao",t)},expression:"item.observacao"}})],1),e("v-flex",{attrs:{md12:""}},[e("v-layout",{staticClass:"justify-end"},[e("v-btn",{attrs:{color:"primary"},on:{click:a.editarOcorrencia}},[a._v("Salvar")])],1)],1)],1)],1)],1)],1)],1)]:a._e()],2)},n=[],i=e("fd17"),r=e("3a86"),l=e("65e0"),s=function(){return e.e("9916").then(e.bind(null,"9916"))},c=function(){return e.e("2e20").then(e.bind(null,"2e20"))},d=function(){return e.e("e73b").then(e.bind(null,"e73b"))},u=function(){return e.e("3970").then(e.bind(null,"3970"))},m=function(){return e.e("4b8e").then(e.bind(null,"4b8e"))},f={components:{ClienteSPC:s,ClienteRenegociar:c,ClienteDados:d,ClienteCarnes:u,ClientePagamentos:m},data:function(){return{isFila:!1,item:null,dialogEditOcorrencia:!1,formCobranca:{id:null,clienteId:null,lojaId:null,atrasoDesde:null,diasAtraso:null,vlAtrasoOriginal:null,dataCobranca:null,procedimentoCobranca:"Contato telefônico",dataAgendamento:null,tipoOcorrenciaId:null,horaAgendamento:null,observacao:null},tiposOcorrencia:[],items:[],totalItems:0,pagination:{pageNo:1,rowsPerPage:15,sortBy:"dataCobranca",descending:!0},clienteFila:null,form:{id:null,redeId:null,empresaId:null,lojaId:null,nome:null,cpf:null,identidade:null,orgaoEmissor:null,dataEmissao:null,uf:null,grupo:null,dataNascimento:null,naturalEstado:null,naturalCidade:null,sexo:null,estadoCivil:null,dependentes:null,nomePai:null,nomeMae:null,telResidencial:null,celular:null,email:null,escolaridade:null,rendaPrincipal:null,endereco:new i["a"],tipoResidencia:null,tempoResidenciaAnos:null,tempoResidenciaMeses:null,empresa:null,cargo:null,tempoEmpregoAnos:null,tempoEmpregoMeses:null,telComercial:null,ramal:null,nomeRef1:null,relacaoRef1:null,telRef1:null,nomeRef2:null,relacaoRef2:null,telRef2:null,nomeRef3:null,relacaoRef3:null,telRef3:null,nomeRef4:null,relacaoRef4:null,telRef4:null,vendaId:null,observacoes:[],ultimoHistoricoSPC:null},loading:!0,headers:[{sortable:!1,align:"center",text:"Atraso Desde",value:"dataAtraso"},{sortable:!1,align:"center",text:"Cobrança Em",value:"dataCobranca",width:"150px"},{sortable:!1,text:"Usuário Agenda/Exec.",value:"usuario"},{sortable:!1,align:"right",text:"Dias Atraso",value:"diasAtraso"},{sortable:!1,align:"right",text:"Atraso Original",value:"atrasoOriginal"},{sortable:!1,text:"Ocorrência",value:"tipoOcorrencia",width:"135px"},{sortable:!1,text:"Observação",value:"observacao",width:"100%"},{sortable:!1,text:""}]}},watch:{pagination:{handler:function(){}}},beforeMount:function(){if(this.loading=!0,this.$route.query&&this.$route.query.payload)return this.isFila=!0,this.clienteFila=JSON.parse(this.$route.query.payload),void this.reload(this.clienteFila.clienteId,this.clienteFila.lojaId);this.$route.params.clienteId&&this.$route.params.lojaId&&(this.isFila=!1,this.reload(this.$route.params.clienteId,this.$route.params.lojaId))},beforeRouteUpdate:function(a,t,e){var o=this.clienteFila.clienteId,n=this.clienteFila.lojaId;this.reload(o,n),e()},methods:{reload:function(a,t){var e=this;this.loading=!0,this.form.id=a,this.form.lojaId=t,r["j"].getDadosCobrancaCliente(this.form.id,this.form.lojaId).then(function(a){e.clienteFila=a.data,r["h"].getById(e.form.id).then(function(a){e.form=a.data,e.form.lojaId=t,e.formatDatas()}).finally(function(){"BLOQUEADO"===e.form.status?r["B"].findUltimoHistoricoClienteSPC(e.form.id).then(function(a){e.form.ultimoHistoricoSPC=a.data}).finally(function(){e.loading=!1}):e.loading=!1}),e.paginar()}).catch(function(a){e.$root.showErro(a.data),e.loading=!1}),r["C"].getAllTiposOcorrencia().then(function(a){e.tiposOcorrencia=a.data})},openEditarOcorrencia:function(a){this.item=a,this.dialogEditOcorrencia=!0},closeEditarOcorrencia:function(){this.item=null,this.dialogEditOcorrencia=!1},cancelarCobranca:function(){this.$router.push("/lista-cliente")},salvarOcorrencia:function(){var a=this;this.formCobranca.clienteId=this.form.id,this.formCobranca.lojaId=this.form.lojaId,this.formCobranca.atrasoDesde=this.clienteFila.dataVencimento,this.formCobranca.diasAtraso=this.clienteFila.diasAtraso,this.formCobranca.vlAtrasoOriginal=this.clienteFila.saldoDevedor,this.loading=!0,r["j"].salvarOcorrencia(this.formCobranca).then(function(t){a.loading=!1,a.$root.showSucesso(t.data),a.resetFormCobranca(),a.isFila?a.pularCliente():a.$router.push("/lista-cliente")}).catch(function(t){a.loading=!1,a.$root.showErro(t.data)})},pularCliente:function(){this.clienteFila=this.$root.getProximoFilaCobranca(),this.clienteFila?this.$router.push("/cliente-cobranca?payload="+JSON.stringify(this.clienteFila)):(this.$root.showAlerta("Fila de Cobrança chegou ao fim, informe novos filtros para iniciar uma nova fila."),this.$router.push("/cobranca"))},cancelarFilaCobranca:function(){this.$root.cleanFilaCobranca(),this.$router.push("/cobranca")},paginar:function(){var a=this;r["j"].pagination(this.pagination,{clienteId:this.form.id,lojaId:this.form.lojaId}).then(function(t){a.items=t.data.content,a.totalItems=t.data.totalElements,a.addPreviaOcorrencia()})},addPreviaOcorrencia:function(){var a={atrasoDesde:this.clienteFila.dataVencimento,dataCobranca:this.$moment(new Date).add(10,"m").toDate(),usuario:this.$root.usuarioLogin(),diasAtraso:this.clienteFila.diasAtraso,vlAtrasoOriginal:this.clienteFila.saldoDevedor};this.items.splice(0,0,a),this.totalElements++},editarOcorrencia:function(){var a=this;this.formCobranca.id=this.item.id,this.formCobranca.observacao=this.item.observacao,this.loading=!0,r["j"].salvarOcorrencia(this.formCobranca).then(function(t){a.loading=!1,a.closeEditarOcorrencia(),a.resetFormCobranca(),a.$root.showSucesso(t.data)}).catch(function(t){a.loading=!1,a.$root.showErro(t.data)})},setData:function(a){var t=this.form.lojaId;this.form=a,t&&(this.form.lojaId=t),this.formatDatas()},formatDatas:function(){var a=this;this.form.dataEmissao&&(this.form.dataEmissao=this.$moment(this.form.dataEmissao).format("YYYY-MM-DD")),this.form.dataNascimento&&(this.form.dataNascimento=this.$moment(this.form.dataNascimento).format("YYYY-MM-DD")),this.form.observacoes&&(this.form.observacoes=this.form.observacoes.map(function(t){return t.dataCadastro=a.$moment(t.dataCadastro).format("YYYY-MM-DD"),t}))},cancelar:function(){this.$router.push("/lista-cliente")},formatValorMonetario:function(a){return l["a"].formatValorMonetario(a)},resetFormCobranca:function(){this.formCobranca={id:null,clienteId:null,lojaId:null,atrasoDesde:null,diasAtraso:null,vlAtrasoOriginal:null,dataCobranca:null,procedimentoCobranca:"Contato telefônico",dataAgendamento:null,tipoOcorrenciaId:null,horaAgendamento:null,observacao:null}}}},v=f,h=e("2877"),b=Object(h["a"])(v,o,n,!1,null,null,null);t["default"]=b.exports},fd17:function(a,t,e){"use strict";e.d(t,"a",function(){return l});var o=e("d4ec");function n(a,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(a,o.key,o)}}function i(a,t,e){return t&&n(a.prototype,t),e&&n(a,e),a}var r=e("ade3"),l=function(){function a(){Object(o["a"])(this,a),Object(r["a"])(this,"cep",void 0),Object(r["a"])(this,"logradouro",void 0),Object(r["a"])(this,"numero",void 0),Object(r["a"])(this,"complemento",void 0),Object(r["a"])(this,"bairro",void 0),Object(r["a"])(this,"cidade",void 0),Object(r["a"])(this,"estado",void 0),this.cep=null,this.logradouro=null,this.numero=null,this.complemento=null,this.bairro=null,this.cidade=null,this.estado=null}return i(a,[{key:"printEndereco",value:function(){return this.logradouro+","+this.numero+","+this.cidade+"/"+this.estado+" CEP: "+this.cep}}]),a}()}}]);
//# sourceMappingURL=chunk-729b.d5f3c2a7.js.map