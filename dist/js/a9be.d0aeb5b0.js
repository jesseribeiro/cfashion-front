(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["a9be"],{a9be:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:""}},[a("material-card",{attrs:{color:"primary",title:"Pesquisar Usuário"}},[a("v-card",{staticClass:"elevation-0"},[a("v-card-text",[a("v-form",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md4:""}},[a("v-text-field",{attrs:{label:"Usuário"},model:{value:t.filtros.nome,callback:function(e){t.$set(t.filtros,"nome",e)},expression:"filtros.nome"}})],1),a("v-flex",{attrs:{md4:""}},[a("v-text-field",{attrs:{label:"Email"},model:{value:t.filtros.email,callback:function(e){t.$set(t.filtros,"email",e)},expression:"filtros.email"}})],1),a("v-flex",{attrs:{md4:""}},[a("v-text-field",{attrs:{label:"Login"},model:{value:t.filtros.login,callback:function(e){t.$set(t.filtros,"login",e)},expression:"filtros.login"}})],1)],1)],1)],1),a("v-card-actions",[a("v-btn",{attrs:{loading:t.loadingBtn,color:"primary"},on:{click:t.pesquisar}},[t._v("Pesquisar")])],1)],1)],1)],1),a("v-flex",{attrs:{md12:""}},[a("v-card",[a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[t._v("Usuários")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-btn",{attrs:{small:"",fab:"",color:"primary"}},[a("v-icon",{on:{click:function(e){t.newItem()}}},[t._v("mdi-plus")])],1)],1),a("v-progress-linear",{attrs:{active:t.loading,color:"light-blue",indeterminate:"",height:"3"}}),a("v-data-table",{staticClass:"elevation-1 arrow-pagintion",attrs:{headers:t.headers,items:t.items,"total-items":t.totalItems,pagination:t.pagination},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headerCell",fn:function(e){var i=e.header;return[a("span",{staticClass:"subheading font-weight-light text--darken-3",domProps:{textContent:t._s(i.text)}})]}},{key:"items",fn:function(e){var i=e.item;return[a("td",[t._v(t._s(i.nome))]),a("td",[t._v(t._s(i.email))]),a("td",[t._v(t._s(i.login))]),a("td",[t._v(t._s(i.rolesLabel))]),a("td",[t._v(t._s(i.lojasLabel))]),a("td",{staticClass:"justify-end layout ma-2"},[a("v-icon",{staticClass:"mr-2",attrs:{color:"blue",title:"Editar dados do usuário"},on:{click:function(e){t.editItem(i)}}},[t._v("mdi-pencil")]),a("v-icon",{attrs:{color:"red",title:"Excluir usuário"},on:{click:function(e){t.openDialogDelete(i)}}},[t._v("mdi-delete")])],1)]}}])})],1)],1),t.dialog?[a("v-layout",{attrs:{row:"","justify-center":""}},[a("v-dialog",{attrs:{"max-width":"390"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Excluir Usuário")]),a("v-card-text",[t._v("\n              Confirma a exclusão do usuário "),a("span",{staticClass:"title"},[t._v(t._s(t.item.login))]),t._v("? Essa operação não poderá ser desfeita.\n            ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:t.closeDialogDelete}},[t._v("\n                Cancelar\n              ")]),a("v-btn",{attrs:{color:"red"},on:{click:function(e){t.deleteItem(t.item.id)}}},[t._v("\n                Excluir\n              ")])],1)],1)],1)],1)]:t._e(),t.flgPedirPermissao?a("core-btn-permissao",{attrs:{action:t.deleteItem,close:t.closeDialogDelete,"data-form":t.item.id}}):t._e()],2)],1)},o=[],l=a("3a86"),s=a("5a50"),n={metaInfo:{titleTemplate:"%s - Usuários"},data:function(){return{flgPedirPermissao:!1,dialog:!1,item:null,loading:!0,loadingBtn:!1,totalItems:0,pagination:{rowsPerPage:10,sortBy:"nome"},selected:[],filtros:{nome:"",email:"",login:"",role:""},roles:[],headers:[{sortable:!1,text:"Nome",value:"nome"},{sortable:!1,text:"Email",value:"email"},{sortable:!1,text:"Login",value:"login"},{sortable:!1,text:"Perfil de Acesso",value:"role"},{sortable:!1,text:"Lojas",value:"lojasLabel"},{sortable:!1,text:""}],items:[]}},watch:{pagination:{handler:function(){this.paginar()}}},methods:{reload:function(){var t=this;this.paginar(),l["z"].findAll().then(function(e){t.roles=e.data})},newItem:function(){this.$router.push("cad-user")},editItem:function(t){this.$router.push("cad-user/".concat(t.id,"/").concat(s["b"]))},openDialogDelete:function(t){t.login!==localStorage.getItem(s["h"].LOGIN)?(this.item=t,this.dialog=!0):this.$root.showAlerta("Não é possível excluir o usuário que está logado")},closeDialogDelete:function(){this.item=null,this.dialog=!1,this.flgPedirPermissao=!1},deleteItem:function(t,e){var a=this;l["D"].delete(t,e).then(function(t){a.$root.showSucesso(t.data),a.callbackDelete()}).catch(function(t){405===t.status&&(a.flgPedirPermissao=!0),a.$root.showErro(t.data)})},callbackDelete:function(){this.closeDialogDelete(),this.reload()},pesquisar:function(){this.loadingBtn=!0,this.paginar()},paginar:function(){var t=this;this.loading=!0,l["D"].pagination(this.pagination.rowsPerPage,this.pagination.page-1,this.pagination.sortBy||"nome",this.filtros).then(function(e){t.items=e.data.content,t.totalItems=e.data.totalElements}).finally(function(){t.loadingBtn=!1,t.loading=!1})}}},r=n,c=a("2877"),d=Object(c["a"])(r,i,o,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=a9be.d0aeb5b0.js.map