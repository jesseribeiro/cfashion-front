(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["b620"],{b620:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{fluid:"","grid-list-md":""}},[a("core-progress-modal",{attrs:{show:t.loading}}),t.loading?t._e():[a("v-form",{attrs:{novalidate:"",enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.validateBeforeSubmit(e)}}},[a("v-card",{staticClass:"elevation-0"},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{md12:""}},[t._v("\n              Informe abaixo o cedente que deseja enviar o arquivo de movimento.\n            ")]),a("v-flex",{attrs:{md12:""}},[a("v-select",{attrs:{items:t.listaCedente,label:"Cedente","item-value":"id","item-text":"descricao"},on:{change:t.onChangeCedente},model:{value:t.form.cedenteId,callback:function(e){t.$set(t.form,"cedenteId",e)},expression:"form.cedenteId"}})],1)],1)],1)],1),t.form.cedenteId?a("material-card",{attrs:{color:"primary",title:"Arquivo de Movimento"}},[a("v-card",{staticClass:"elevation-0"},[a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[t.ultimoRetorno?a("v-flex",{attrs:{md12:""}},[t._v("\n                Último retorno de PAGAMENTOS número "),a("span",{staticClass:"title"},[t._v(t._s(t.ultimoRetorno.codigo))]),t._v(" gerado em "),a("span",{staticClass:"title"},[t._v(t._s(t._f("moment")(t.ultimoRetorno.dataCadastro,"DD/MM/YYYY")))]),t._v(" - benefeciário "),a("span",{staticClass:"title"},[t._v(t._s(t.ultimoRetorno.beneficiario))])]):a("v-flex",{attrs:{md12:""}},[t._v("\n                Ainda não foi enviado nenhum arquivo de PAGAMENTOS para o beneficiário "),a("span",{staticClass:"title"},[t._v("Prático Administradora de Crediário Ltda ")])]),a("v-flex",{attrs:{md12:""}},[a("input",{staticClass:"caption",attrs:{id:"anexar",type:"file"},on:{change:function(e){t.anexar(e)}}})])],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{loading:t.loadingBtn,color:"primary",type:"submit"}},[t._v("Enviar")])],1)],1)],1):t._e()],1)]],2)},n=[],i=(a("7f7f"),a("3a86")),r={data:function(){return{form:{cedenteId:null},file:{},formData:null,loading:!1,loadingBtn:!1,listaCedente:[],ultimoRetorno:null}},beforeMount:function(){var t=this;this.loading=!0,i["d"].findAllBanco().then(function(e){t.listaCedente=e.data}).catch(function(e){t.$root.showErro(e.data)}).finally(function(){t.loading=!1})},methods:{validateBeforeSubmit:function(){var t=this;this.$validator.validate().then(function(e){e?(t.loadingBtn=!0,i["e"].uploadArquivoRetorno(t.form.cedenteId,t.formData).then(function(e){t.$root.showSucesso("Documento enviado com sucesso")}).catch(function(e){return t.$root.showErro(e.data)}).finally(function(){t.loadingBtn=!1})):t.$root.showAlerta(t.$vuetify.t("$vuetify.Erro.camposObrigatorios"))})},anexar:function(t){t&&t.target&&t.target.files.length>0&&(this.file=t.target.files[0],this.formData=new FormData,this.formData.append("file",this.file),this.formData.append("name",this.file.name))},onChangeCedente:function(t){var e=this;t&&(this.loading=!0,i["e"].getUltimoArquivoRetorno(t).then(function(t){e.ultimoRetorno=t.data}).catch(function(t){e.$root.showErro(t)}).finally(function(){e.loading=!1}))}}},l=r,s=a("2877"),d=Object(s["a"])(l,o,n,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=b620.2824a07e.js.map