(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["3970"],{3970:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("material-card",{attrs:{color:"primary",title:"Pesquisar Carnês"}},[e("v-card",{staticClass:"elevation-0"},[e("v-card-text",[e("v-form",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md2:""}},[e("v-text-field",{attrs:{label:"Data Inicial",type:"date"},model:{value:t.filtros.dataInicial,callback:function(a){t.$set(t.filtros,"dataInicial",a)},expression:"filtros.dataInicial"}})],1),e("v-flex",{attrs:{md1:""}},[e("span",{staticClass:"layout fill-height align-center justify-center"},[t._v("a")])]),e("v-flex",{attrs:{md2:""}},[e("v-text-field",{attrs:{label:"Data Final",type:"date"},model:{value:t.filtros.dataFinal,callback:function(a){t.$set(t.filtros,"dataFinal",a)},expression:"filtros.dataFinal"}})],1),e("v-flex",{attrs:{md2:""}},[e("v-autocomplete",{attrs:{items:t.statusCarne,"item-value":"id","item-text":"descricao",label:"Status",clearable:""},model:{value:t.filtros.status,callback:function(a){t.$set(t.filtros,"status",a)},expression:"filtros.status"}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{loading:t.loadingBtn,color:"primary"},on:{click:t.pesquisar}},[t._v("Pesquisar")])],1)],1)],1)],1),e("v-flex",{attrs:{md12:""}},[e("v-card",[e("v-toolbar",{attrs:{flat:"",color:"white"}},[e("v-toolbar-title",[t._v("Carnês")]),e("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}})],1),e("v-progress-linear",{attrs:{active:t.loading,color:"light-blue",indeterminate:"",height:"3"}}),e("v-data-table",{staticClass:"elevation-1 arrow-pagintion",attrs:{headers:t.headersCarne,items:t.carnes,expand:!1,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(a){var s=a.item;return[e("tr",{attrs:{active:s.expanded}},[e("td",{staticClass:"justify-center layout"},[e("v-icon",{on:{click:function(t){s.expanded=!s.expanded}}},[t._v("\n                  "+t._s(s.expanded?"mdi-minus":"mdi-plus")+"\n                ")])],1),e("td",{staticClass:"text-xs-center"},[t._v(t._s(t._f("moment")(s.dataCompra,"DD/MM/YYYY")))]),e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})))]),e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.valorEntrada.toLocaleString("pt-BR",{minimumFractionDigits:2})))]),e("td",{staticClass:"text-xs-center"},[t._v(t._s(s.qtdParcela))]),e("td",[t._v(t._s(s.nomeLoja))]),e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.peMultaPorAtraso.toLocaleString("pt-BR",{minimumFractionDigits:2})))]),e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.peJurosMoraPorAtraso.toLocaleString("pt-BR",{minimumFractionDigits:2})))]),e("td",{staticClass:"text-xs-center font-weight-black"},[t._v(t._s(s.tipoCarne))]),e("td",{staticClass:"text-xs-center"},[e("core-status-pagamento",{attrs:{status:s.status}})],1),e("td",{staticClass:"text-xs-center"},["Em Aberto"===s.status?e("v-icon",{on:{click:function(a){t.gerarCarnePDF(s.carneId)}}},[t._v("mdi-printer")]):t._e()],1)]),s.expanded?e("tr",[e("td",{attrs:{colspan:"11"}},[e("v-data-table",{staticClass:"elevation-1 arrow-pagintion",attrs:{headers:t.headersParcela,items:s.parcelas,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(a){var s=a.item;return[e("tr",[e("td",{staticClass:"text-xs-center"},[t._v(t._s(0===s.numero?"Entrada":s.numero))]),e("td",{staticClass:"text-xs-center"},[t._v(t._s(t._f("moment")(s.dataVencimento,"DD/MM/YYYY")))]),e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.valor.toLocaleString("pt-BR",{minimumFractionDigits:2})))]),s.valorMulta?e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.valorMulta.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",{staticClass:"text-xs-right"},[t._v("-")]),s.valorJurosMora?e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.valorJurosMora.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",{staticClass:"text-xs-right"},[t._v("-")]),s.desconto?e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.desconto.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",{staticClass:"text-xs-right"},[t._v("-")]),s.valorPago?e("td",{staticClass:"text-xs-right"},[t._v(t._s(s.valorPago.toLocaleString("pt-BR",{minimumFractionDigits:2})))]):e("td",{staticClass:"text-xs-right"},[t._v("-")]),s.dataPagto?e("td",{staticClass:"text-xs-center"},[t._v(t._s(t._f("moment")(s.dataPagto,"DD/MM/YYYY")))]):e("td",{staticClass:"text-xs-center"},[t._v("-")]),e("td",[t._v(t._s(s.localPagto))]),e("td",{staticClass:"text-xs-center"},[e("core-status-pagamento",{attrs:{status:s.status,"motivo-cancelamento":s.motivoCancelamento}})],1),e("td",{staticClass:"text-xs-center"},["Pago"===s.status||"Cancelado"===s.status?e("v-icon",{on:{click:function(a){t.openRecibo(s)}}},[t._v("mdi-receipt")]):t._e()],1)])]}}])})],1)]):t._e()]}}])})],1)],1)],1),t.openViewCarne?[e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{"max-width":"800"},model:{value:t.openViewCarne,callback:function(a){t.openViewCarne=a},expression:"openViewCarne"}},[t.filePDF?e("embed",{attrs:{id:"plugin",src:t.filePDF,width:"100%",height:"1000px",name:"plugin",type:"application/pdf"}}):e("v-layout",{staticClass:"justify-center"},[e("core-progress-modal",{attrs:{show:!t.filePDF}})],1)],1)],1)]:t._e(),t.dialogRecibo?e("cliente-recibo-pagamento",{attrs:{"pagamento-id":t.pagamentoId,show:t.dialogRecibo,close:t.closeRecibo}}):t._e()],2)},i=[],r=(e("34ef"),e("c5f6"),e("3a86")),l=function(){return e.e("chunk-2e0c").then(e.bind(null,"560e"))},n={components:{ClienteReciboPagamento:l},props:{value:{type:Object,required:!0}},data:function(){return{dialogRecibo:!1,pagamentoId:null,openViewCarne:!1,filePDF:null,expanded:!1,currentPage:0,pageCount:0,form:{},selected:[],filtros:{dataInicial:null,dataFinal:null,lojaId:null,status:null},headersCarne:[{sortable:!1,text:""},{sortable:!1,text:"Data",align:"center",value:"dataCompra"},{sortable:!1,text:"Valor",align:"right",value:"valorTotal"},{sortable:!1,text:"Entrada",align:"right",value:"valorEntrada"},{sortable:!1,align:"center",text:"Parcelas",value:"qtdParcela"},{sortable:!1,text:"Loja",value:"nomeLoja"},{sortable:!1,text:"Multa",align:"right",value:"peMultaPorAtraso"},{sortable:!1,align:"right",text:"Juros Mora",value:"peJurosMoraPorAtraso"},{sortable:!1,text:"Carnê",align:"center",value:"tipoCarne"},{sortable:!1,text:"Status",align:"center",value:"status"},{sortable:!1,text:""}],carnes:[],loading:!1,loadingBtn:!1,statusCarne:[],headersParcela:[{sortable:!1,align:"center",text:"Parcela",value:"numero",class:"grey lighten-1"},{sortable:!1,align:"center",text:"Vencto",value:"dataVencimento",class:"grey lighten-1"},{sortable:!1,text:"Valor Parcela",value:"valor",align:"right",class:"grey lighten-1"},{sortable:!1,text:"Multa",value:"valorMulta",align:"right",class:"grey lighten-1"},{sortable:!1,text:"Juros Mora",value:"valorJurosMora",align:"right",class:"grey lighten-1"},{sortable:!1,text:"Desconto",value:"desconto",align:"right",class:"grey lighten-1"},{sortable:!1,text:"Valor Pago",value:"valorPago",align:"right",class:"grey lighten-1"},{sortable:!1,align:"center",text:"Pagto Em",value:"dataPagto",class:"grey lighten-1"},{sortable:!1,text:"Local Pagto",value:"localPagto",class:"grey lighten-1"},{sortable:!1,align:"center",text:"Status",value:"status",class:"grey lighten-1"},{sortable:!1,text:"",class:"grey lighten-1"}]}},beforeMount:function(){var t=this;this.filtros.lojaId=Number(this.value.lojaId),r["C"].getAllStatusCarne().then(function(a){t.statusCarne=a.data}),this.paginar()},methods:{pesquisar:function(){this.loadingBtn=!0,this.paginar()},gerarCarnePDF:function(t){var a=this;this.filePDF=null,this.openViewCarne=!0,r["f"].geraCarnePDF(t).then(function(t){if(window.navigator&&window.navigator.msSaveOrOpenBlob){a.openViewCarne=!1;for(var e=atob(t.data),s=new Array(e.length),i=0;i<e.length;i++)s[i]=e.charCodeAt(i);var r=new Uint8Array(s),l=new Blob([r],{type:"application/pdf"});window.navigator.msSaveOrOpenBlob(l,"carne_compra.pdf")}else a.filePDF=window.URL.createObjectURL(t.data)}).catch(function(t){a.$root.showErro("Erro ao gerar o carne de compra"),a.filePDF=null,a.openViewCarne=!1}).finally(function(){})},paginar:function(){var t=this;this.loading=!0,r["h"].carnesCliente(this.value.id,this.filtros).then(function(a){t.carnes=a.data}).finally(function(){t.loadingBtn=!1,t.loading=!1})},closeRecibo:function(){this.dialogRecibo=!1,this.pagamentoId=null},openRecibo:function(t){this.pagamentoId=t.pagamentoId,this.dialogRecibo=!0}}},o=n,c=e("2877"),d=Object(c["a"])(o,s,i,!1,null,null,null);a["default"]=d.exports}}]);
//# sourceMappingURL=3970.fd7b7620.js.map