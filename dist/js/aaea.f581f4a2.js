(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["aaea"],{aaea:function(a,t,e){"use strict";e.r(t);var i=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("v-container",{attrs:{fluid:"","grid-list-md":""}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("material-card",{attrs:{color:"primary",title:"Autorizações de Compras"}},[e("v-card",{staticClass:"elevation-0"},[e("v-card-text",[e("v-form",{on:{submit:function(t){return t.preventDefault(),a.pesquisar(t)}}},[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("core-filtro-rede-empresa-loja",{model:{value:a.filtros,callback:function(t){a.filtros=t},expression:"filtros"}})],1),e("v-flex",{attrs:{md2:""}},[e("v-text-field",{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],attrs:{label:"CPF"},model:{value:a.filtros.cpf,callback:function(t){a.$set(a.filtros,"cpf",t)},expression:"filtros.cpf"}})],1),e("v-flex",{attrs:{md2:""}},[e("v-text-field",{attrs:{label:"Data Inicial",type:"date"},model:{value:a.filtros.dataInicial,callback:function(t){a.$set(a.filtros,"dataInicial",t)},expression:"filtros.dataInicial"}})],1),e("v-flex",{attrs:{md1:""}},[e("span",{staticClass:"layout fill-height align-center justify-center"},[a._v("a")])]),e("v-flex",{attrs:{md2:""}},[e("v-text-field",{attrs:{label:"Data Final",type:"date"},model:{value:a.filtros.dataFinal,callback:function(t){a.$set(a.filtros,"dataFinal",t)},expression:"filtros.dataFinal"}})],1),e("v-flex",{attrs:{md2:""}},[e("v-autocomplete",{attrs:{items:a.situacoes,"item-value":"id","item-text":"descricao",label:"Situação",clearable:""},model:{value:a.filtros.situacao,callback:function(t){a.$set(a.filtros,"situacao",t)},expression:"filtros.situacao"}})],1)],1)],1)],1),e("v-card-actions",[e("v-spacer"),e("v-btn",{attrs:{loading:a.loadingBtn,color:"primary"},on:{click:a.pesquisar}},[a._v("Pesquisar")])],1)],1)],1)],1),e("v-flex",{attrs:{md12:""}},[e("v-card",[e("v-toolbar",{attrs:{flat:"",color:"white"}},[e("v-toolbar-title",[a._v("Autorizações")]),e("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}})],1),e("v-progress-linear",{attrs:{active:a.loading,color:"light-blue",indeterminate:"",height:"3"}}),e("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.items,"total-items":a.totalItems,pagination:a.pagination,"rows-per-page-items":a.pagination.rowsPerPageItems,"rows-per-page-text":a.pagination.rowsPerPageText,"item-key":"id"},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"items",fn:function(t){var i=t.item;return[e("td",{staticClass:"text-xs-center"},[a._v(a._s(a._f("moment")(i.dataAutorizacao,"DD/MM/YYYY H:mm")))]),e("td",{staticClass:"text-xs-center"},[e("a",{attrs:{href:"/cad-cliente/"+i.clienteId+"/"+i.lojaId}},[a._v("\n                "+a._s(i.cpf)+"\n              ")])]),e("td",[a._v(a._s(i.valorVenda.toLocaleString("pt-BR",{minimumFractionDigits:2})))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(i.qtdParcela))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(i.nomeLoja))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(i.codigoAutorizacao))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(i.tipoAutorizacao))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(i.nomeUsuario))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(i.recusado))]),e("td",{staticClass:"text-xs-center"},[a._v(a._s(i.situacao))]),e("td",{staticClass:"text-xs-center"},[i.podeCancelar?e("v-btn",{attrs:{color:"error"},on:{click:function(t){a.openDialogCancelar(i)}}},[a._v("\n                Cancelar\n              ")]):a._e()],1),e("td",{staticClass:"text-xs-center"},["Cancelada"!=i.situacao?e("v-icon",{on:{click:function(t){a.openImprimirCarne(i)}}},[a._v("mdi-printer")]):a._e()],1),e("td",{staticClass:"text-xs-center"},[e("v-icon",{on:{click:function(t){a.openReciboVenda(i)}}},[a._v("mdi-receipt")])],1)]}}])})],1)],1),a.dialogCancelar?[e("v-layout",{attrs:{row:"","justify-center":""}},[e("v-dialog",{attrs:{persistent:"","max-width":"390"},model:{value:a.dialogCancelar,callback:function(t){a.dialogCancelar=t},expression:"dialogCancelar"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[a._v("Cancelar Venda")]),e("v-card-text",[e("v-layout",{attrs:{row:"",wrap:""}},[e("v-flex",{attrs:{md12:""}},[e("span",{staticClass:"headlline"},[a._v("Essa operação não poderá ser desfeita.")])])],1)],1),e("v-card-actions",[e("v-btn",{staticStyle:{color:"black !important"},attrs:{outline:""},on:{click:a.closeDialogCancelar}},[a._v("Cancelar")]),e("v-spacer"),e("v-btn",{attrs:{loading:a.loadingBtn,color:"red"},on:{click:a.confirmarCancelar}},[a._v("Confirmar")])],1)],1)],1)],1)]:a._e(),a.dialogReciboVenda?e("core-recibo-venda",{attrs:{"venda-id":a.vendaId,show:a.dialogReciboVenda,close:a.closeReciboVenda}}):a._e(),a.dialogImprimirCarne?e("core-dialog-imprimir-carne",{attrs:{value:a.dialogImprimirCarne,"carne-id":a.carneId,close:a.closeImprimirCarne}}):a._e()],2)],1)},o=[],n=e("3a86"),r=e("5a50"),l=e("fa1c"),s={metaInfo:{titleTemplate:"%s - Autorização"},data:function(){return{vendaId:null,carneId:null,selected:[],money:r["i"],statusParcelas:[],dialogCancelar:!1,dialogRecibo:!1,dialogImprimirCarne:!1,dialogReciboVenda:!1,pagination:{rowsPerPage:15,rowsPerPageItems:r["j"]},filtros:{dataInicial:l["a"].addDia(new Date,-1),dataFinal:l["a"].currentDate(),situacao:null,cpf:null},headers:[{sortable:!1,text:"Data Autorização",align:"center",value:"dataAutorizacao"},{sortable:!1,text:"CPF cliente",align:"center",value:"cpf"},{sortable:!1,text:"Valor",value:"valorVenda"},{sortable:!1,text:"Parc.",value:"qtdParcela"},{sortable:!1,text:"Loja",value:"nomeLoja"},{sortable:!1,text:"Autorização",value:"codigoAutorizacao"},{sortable:!1,text:"Tipo",value:"tipoAutorizacao"},{sortable:!1,text:"Usuário",align:"center",value:"nomeUsuario"},{sortable:!1,text:"Recusa por",value:"reusado"},{sortable:!1,text:"Situação",align:"center",value:"situacao"},{sortable:!1,text:"Ações",align:"center"},{sortable:!1,text:"Carnê",align:"center"},{sortable:!1,text:"Recibo",align:"center"}],items:[],totalItems:null,loading:!1,loadingBtn:!1,situacoes:[]}},watch:{pagination:{handler:function(){this.paginar()}}},beforeMount:function(){var a=this;n["C"].getAllStatusVenda().then(function(t){a.situacoes=t.data}).finally(function(){a.loading=!1})},methods:{closeDialogCancelar:function(){this.dialogCancelar=!1,this.vendaId=null},closeReciboVenda:function(){this.dialogReciboVenda=!1,this.vendaId=null},confirmarCancelar:function(){var a=this;this.loading=!0,n["E"].cancelarVenda(this.vendaId).then(function(t){a.$root.showSucesso("Operação realizada com sucesso"),a.paginar()}).catch(function(t){a.$root.showErro("Erro ao tentar cancelar venda: "+t)}).finally(function(){a.loading=!1,a.closeDialogCancelar()})},openDialogCancelar:function(a){this.dialogCancelar=!0,this.vendaId=a.vendaId},openReciboVenda:function(a){this.vendaId=a.vendaId,this.dialogReciboVenda=!0},openImprimirCarne:function(a){this.carneId=a.carneId,this.vendaId=a.vendaId,this.dialogImprimirCarne=!0},closeImprimirCarne:function(){this.dialogImprimirCarne=!1,this.vendaId=null,this.carneId=null},pesquisar:function(){var a=this;this.$validator.validate().then(function(t){t?(a.loadingBtn=!0,a.paginar()):a.$root.showAlerta("Informe o CPF!")})},paginar:function(){var a=this;this.loading=!0,n["E"].paginationAutorizacao(this.pagination.rowsPerPage,this.pagination.page-1,this.pagination.sortBy||"dataCompra",this.filtros).then(function(t){a.items=t.data.content,a.totalItems=t.data.totalElements}).catch(function(t){a.$root.showErro(t.data)}).finally(function(){a.loadingBtn=!1,a.loading=!1})}}},c=s,d=e("2877"),u=Object(d["a"])(c,i,o,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=aaea.f581f4a2.js.map