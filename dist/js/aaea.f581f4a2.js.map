{"version":3,"sources":["webpack:///./src/views/autorizacao/Autorizacao.vue?00db","webpack:///src/views/autorizacao/Autorizacao.vue","webpack:///./src/views/autorizacao/Autorizacao.vue?2211","webpack:///./src/views/autorizacao/Autorizacao.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","fluid","grid-list-md","row","wrap","md12","color","title","staticClass","on","submit","$event","preventDefault","pesquisar","model","value","callback","$$v","filtros","expression","md2","directives","name","rawName","label","$set","type","md1","_v","items","situacoes","item-value","item-text","clearable","loading","loadingBtn","click","flat","inset","vertical","active","indeterminate","height","headers","total-items","totalItems","pagination","rows-per-page-items","rowsPerPageItems","rows-per-page-text","rowsPerPageText","item-key","update:pagination","scopedSlots","_u","key","fn","ref","item","_s","_f","dataAutorizacao","href","cpf","valorVenda","toLocaleString","minimumFractionDigits","qtdParcela","nomeLoja","codigoAutorizacao","tipoAutorizacao","nomeUsuario","recusado","situacao","openDialogCancelar","_e","openImprimirCarne","openReciboVenda","justify-center","persistent","max-width","dialogCancelar","staticStyle","outline","closeDialogCancelar","confirmarCancelar","venda-id","vendaId","show","dialogReciboVenda","close","closeReciboVenda","dialogImprimirCarne","carne-id","carneId","closeImprimirCarne","staticRenderFns","Autorizacaovue_type_script_lang_js_","metaInfo","titleTemplate","data","selected","money","constants","statusParcelas","dialogRecibo","rowsPerPage","dataInicial","dateUtils","addDia","Date","dataFinal","currentDate","sortable","text","align","watch","handler","paginar","beforeMount","_this","business","getAllStatusVenda","then","response","finally","methods","_this2","cancelarVenda","$root","showSucesso","catch","erro","showErro","_this3","$validator","validate","result","showAlerta","_this4","paginationAutorizacao","page","sortBy","content","totalElements","error","autorizacao_Autorizacaovue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/aaea.f581f4a2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('material-card',{attrs:{\"color\":\"primary\",\"title\":\"Autorizações de Compras\"}},[_c('v-card',{staticClass:\"elevation-0\"},[_c('v-card-text',[_c('v-form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.pesquisar($event)}}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('core-filtro-rede-empresa-loja',{model:{value:(_vm.filtros),callback:function ($$v) {_vm.filtros=$$v},expression:\"filtros\"}})],1),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-text-field',{directives:[{name:\"mask\",rawName:\"v-mask\",value:('###.###.###-##'),expression:\"'###.###.###-##'\"}],attrs:{\"label\":\"CPF\"},model:{value:(_vm.filtros.cpf),callback:function ($$v) {_vm.$set(_vm.filtros, \"cpf\", $$v)},expression:\"filtros.cpf\"}})],1),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Data Inicial\",\"type\":\"date\"},model:{value:(_vm.filtros.dataInicial),callback:function ($$v) {_vm.$set(_vm.filtros, \"dataInicial\", $$v)},expression:\"filtros.dataInicial\"}})],1),_c('v-flex',{attrs:{\"md1\":\"\"}},[_c('span',{staticClass:\"layout fill-height align-center justify-center\"},[_vm._v(\"a\")])]),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Data Final\",\"type\":\"date\"},model:{value:(_vm.filtros.dataFinal),callback:function ($$v) {_vm.$set(_vm.filtros, \"dataFinal\", $$v)},expression:\"filtros.dataFinal\"}})],1),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-autocomplete',{attrs:{\"items\":_vm.situacoes,\"item-value\":\"id\",\"item-text\":\"descricao\",\"label\":\"Situação\",\"clearable\":\"\"},model:{value:(_vm.filtros.situacao),callback:function ($$v) {_vm.$set(_vm.filtros, \"situacao\", $$v)},expression:\"filtros.situacao\"}})],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"loading\":_vm.loadingBtn,\"color\":\"primary\"},on:{\"click\":_vm.pesquisar}},[_vm._v(\"Pesquisar\")])],1)],1)],1)],1),_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',[_vm._v(\"Autorizações\")]),_c('v-divider',{staticClass:\"mx-2\",attrs:{\"inset\":\"\",\"vertical\":\"\"}})],1),_c('v-progress-linear',{attrs:{\"active\":_vm.loading,\"color\":\"light-blue\",\"indeterminate\":\"\",\"height\":\"3\"}}),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.items,\"total-items\":_vm.totalItems,\"pagination\":_vm.pagination,\"rows-per-page-items\":_vm.pagination.rowsPerPageItems,\"rows-per-page-text\":_vm.pagination.rowsPerPageText,\"item-key\":\"id\"},on:{\"update:pagination\":function($event){_vm.pagination=$event}},scopedSlots:_vm._u([{key:\"items\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(_vm._f(\"moment\")(item.dataAutorizacao,\"DD/MM/YYYY H:mm\")))]),_c('td',{staticClass:\"text-xs-center\"},[_c('a',{attrs:{\"href\":(\"/cad-cliente/\" + (item.clienteId) + \"/\" + (item.lojaId))}},[_vm._v(\"\\n                \"+_vm._s(item.cpf)+\"\\n              \")])]),_c('td',[_vm._v(_vm._s(item.valorVenda.toLocaleString(\"pt-BR\", { minimumFractionDigits: 2 })))]),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(item.qtdParcela))]),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(item.nomeLoja))]),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(item.codigoAutorizacao))]),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(item.tipoAutorizacao))]),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(item.nomeUsuario))]),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(item.recusado))]),_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(item.situacao))]),_c('td',{staticClass:\"text-xs-center\"},[(item.podeCancelar)?_c('v-btn',{attrs:{\"color\":\"error\"},on:{\"click\":function($event){_vm.openDialogCancelar(item)}}},[_vm._v(\"\\n                Cancelar\\n              \")]):_vm._e()],1),_c('td',{staticClass:\"text-xs-center\"},[(item.situacao != 'Cancelada')?_c('v-icon',{on:{\"click\":function($event){_vm.openImprimirCarne(item)}}},[_vm._v(\"mdi-printer\")]):_vm._e()],1),_c('td',{staticClass:\"text-xs-center\"},[_c('v-icon',{on:{\"click\":function($event){_vm.openReciboVenda(item)}}},[_vm._v(\"mdi-receipt\")])],1)]}}])})],1)],1),(_vm.dialogCancelar)?[_c('v-layout',{attrs:{\"row\":\"\",\"justify-center\":\"\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"390\"},model:{value:(_vm.dialogCancelar),callback:function ($$v) {_vm.dialogCancelar=$$v},expression:\"dialogCancelar\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Cancelar Venda\")]),_c('v-card-text',[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('span',{staticClass:\"headlline\"},[_vm._v(\"Essa operação não poderá ser desfeita.\")])])],1)],1),_c('v-card-actions',[_c('v-btn',{staticStyle:{\"color\":\"black !important\"},attrs:{\"outline\":\"\"},on:{\"click\":_vm.closeDialogCancelar}},[_vm._v(\"Cancelar\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"loading\":_vm.loadingBtn,\"color\":\"red\"},on:{\"click\":_vm.confirmarCancelar}},[_vm._v(\"Confirmar\")])],1)],1)],1)],1)]:_vm._e(),(_vm.dialogReciboVenda)?_c('core-recibo-venda',{attrs:{\"venda-id\":_vm.vendaId,\"show\":_vm.dialogReciboVenda,\"close\":_vm.closeReciboVenda}}):_vm._e(),(_vm.dialogImprimirCarne)?_c('core-dialog-imprimir-carne',{attrs:{\"value\":_vm.dialogImprimirCarne,\"carne-id\":_vm.carneId,\"close\":_vm.closeImprimirCarne}}):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container\r\n    fluid\r\n    grid-list-md>\r\n    <v-layout\r\n      row\r\n      wrap>\r\n      <v-flex md12>\r\n        <material-card\r\n          color=\"primary\"\r\n          title=\"Autorizações de Compras\">\r\n          <v-card class=\"elevation-0\">\r\n            <v-card-text>\r\n              <v-form\r\n                @submit.prevent=\"pesquisar\">\r\n                <v-layout\r\n                  row\r\n                  wrap>\r\n                  <v-flex md12>\r\n                    <core-filtro-rede-empresa-loja\r\n                      v-model=\"filtros\"\r\n                    />\r\n                  </v-flex>\r\n                  <v-flex md2>\r\n                    <v-text-field\r\n                      v-mask=\"'###.###.###-##'\"\r\n                      v-model=\"filtros.cpf\"\r\n                      label=\"CPF\"\r\n                    />\r\n                  </v-flex>\r\n                  <v-flex md2>\r\n                    <v-text-field\r\n                      v-model=\"filtros.dataInicial\"\r\n                      label=\"Data Inicial\"\r\n                      type=\"date\"\r\n                    />\r\n                  </v-flex>\r\n                  <v-flex md1>\r\n                    <span class=\"layout fill-height align-center justify-center\">a</span>\r\n                  </v-flex>\r\n                  <v-flex md2>\r\n                    <v-text-field\r\n                      v-model=\"filtros.dataFinal\"\r\n                      label=\"Data Final\"\r\n                      type=\"date\"\r\n                    />\r\n                  </v-flex>\r\n                  <v-flex md2>\r\n                    <v-autocomplete\r\n                      v-model=\"filtros.situacao\"\r\n                      :items=\"situacoes\"\r\n                      item-value=\"id\"\r\n                      item-text=\"descricao\"\r\n                      label=\"Situação\"\r\n                      clearable\r\n                    />\r\n                  </v-flex>\r\n                </v-layout>\r\n              </v-form>\r\n            </v-card-text>\r\n            <v-card-actions>\r\n              <v-spacer />\r\n              <v-btn\r\n                :loading=\"loadingBtn\"\r\n                color=\"primary\"\r\n                @click=\"pesquisar\">Pesquisar</v-btn>\r\n            </v-card-actions>\r\n          </v-card>\r\n        </material-card>\r\n      </v-flex>\r\n      <v-flex md12>\r\n        <v-card>\r\n          <v-toolbar\r\n            flat\r\n            color=\"white\">\r\n            <v-toolbar-title>Autorizações</v-toolbar-title>\r\n            <v-divider\r\n              class=\"mx-2\"\r\n              inset\r\n              vertical />\r\n          </v-toolbar>\r\n          <v-progress-linear\r\n            :active=\"loading\"\r\n            color=\"light-blue\"\r\n            indeterminate\r\n            height=\"3\"\r\n          />\r\n          <v-data-table\r\n            :headers=\"headers\"\r\n            :items=\"items\"\r\n            :total-items=\"totalItems\"\r\n            :pagination.sync=\"pagination\"\r\n            :rows-per-page-items=\"pagination.rowsPerPageItems\"\r\n            :rows-per-page-text=\"pagination.rowsPerPageText\"\r\n            item-key=\"id\"\r\n            class=\"elevation-1\"\r\n          >\r\n            <template\r\n              slot=\"items\"\r\n              slot-scope=\"{ item }\"\r\n              ma-5>\r\n              <td class=\"text-xs-center\">{{ item.dataAutorizacao | moment(\"DD/MM/YYYY H:mm\") }}</td>\r\n              <td class=\"text-xs-center\">\r\n                <a :href=\"`/cad-cliente/${item.clienteId}/${item.lojaId}`\">\r\n                  {{ item.cpf }}\r\n                </a>\r\n              </td>\r\n              <td>{{ item.valorVenda.toLocaleString(\"pt-BR\", { minimumFractionDigits: 2 }) }}</td>\r\n              <td class=\"text-xs-center\">{{ item.qtdParcela }}</td>\r\n              <td class=\"text-xs-center\">{{ item.nomeLoja }}</td>\r\n              <td class=\"text-xs-center\">{{ item.codigoAutorizacao }}</td>\r\n              <td class=\"text-xs-center\">{{ item.tipoAutorizacao }}</td>\r\n              <td class=\"text-xs-center\">{{ item.nomeUsuario }}</td>\r\n              <td class=\"text-xs-center\">{{ item.recusado }}</td>\r\n              <td class=\"text-xs-center\">{{ item.situacao }}</td>\r\n              <td class=\"text-xs-center\">\r\n                <v-btn\r\n                  v-if=\"item.podeCancelar\"\r\n                  color=\"error\"\r\n                  @click=\"openDialogCancelar(item)\">\r\n                  Cancelar\r\n                </v-btn>\r\n              </td>\r\n              <td class=\"text-xs-center\">\r\n                <v-icon\r\n                  v-if=\"item.situacao != 'Cancelada'\"\r\n                  @click=\"openImprimirCarne(item)\">mdi-printer</v-icon>\r\n              </td>\r\n              <td class=\"text-xs-center\">\r\n                <v-icon\r\n                  @click=\"openReciboVenda(item)\">mdi-receipt</v-icon>\r\n              </td>\r\n            </template>\r\n          </v-data-table>\r\n        </v-card>\r\n      </v-flex>\r\n      <template\r\n        v-if=\"dialogCancelar\">\r\n        <v-layout\r\n          row\r\n          justify-center>\r\n          <v-dialog\r\n            v-model=\"dialogCancelar\"\r\n            persistent\r\n            max-width=\"390\">\r\n            <v-card>\r\n              <v-card-title class=\"headline\">Cancelar Venda</v-card-title>\r\n\r\n              <v-card-text>\r\n                <v-layout\r\n                  row\r\n                  wrap>\r\n                  <v-flex md12>\r\n                    <span class=\"headlline\">Essa operação não poderá ser desfeita.</span>\r\n                  </v-flex>\r\n                </v-layout>\r\n              </v-card-text>\r\n\r\n              <v-card-actions>\r\n\r\n                <v-btn\r\n                  outline\r\n                  style=\"color: black !important\"\r\n                  @click=\"closeDialogCancelar\">Cancelar</v-btn>\r\n                <v-spacer/>\r\n\r\n                <v-btn\r\n                  :loading=\"loadingBtn\"\r\n                  color=\"red\"\r\n                  @click=\"confirmarCancelar\">Confirmar</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n        </v-layout>\r\n      </template>\r\n      <core-recibo-venda\r\n        v-if=\"dialogReciboVenda\"\r\n        :venda-id=\"vendaId\"\r\n        :show=\"dialogReciboVenda\"\r\n        :close=\"closeReciboVenda\"\r\n      />\r\n      <core-dialog-imprimir-carne\r\n        v-if=\"dialogImprimirCarne\"\r\n        :value=\"dialogImprimirCarne\"\r\n        :carne-id=\"carneId\"\r\n        :close=\"closeImprimirCarne\"\r\n      />\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport { VendaBusiness, TiposBusiness } from '../../business'\r\nimport { MONEY, ROWS_PER_PAGE_ITEMS } from '../../constants'\r\nimport DateUtils from '../../utils/dateUtils'\r\n\r\nexport default {\r\n  metaInfo: {\r\n    titleTemplate: '%s - Autorização'\r\n  },\r\n  data () {\r\n    return {\r\n      vendaId: null,\r\n      carneId: null,\r\n      selected: [],\r\n      money: MONEY,\r\n      statusParcelas: [],\r\n      dialogCancelar: false,\r\n      dialogRecibo: false,\r\n      dialogImprimirCarne: false,\r\n      dialogReciboVenda: false,\r\n      pagination: {\r\n        rowsPerPage: 15,\r\n        rowsPerPageItems: ROWS_PER_PAGE_ITEMS\r\n      },\r\n      filtros: {\r\n        dataInicial: DateUtils.addDia(new Date(), -1),\r\n        dataFinal: DateUtils.currentDate(),\r\n        situacao: null,\r\n        cpf: null\r\n      },\r\n      headers: [\r\n        {\r\n          sortable: false,\r\n          text: 'Data Autorização',\r\n          align: 'center',\r\n          value: 'dataAutorizacao'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'CPF cliente',\r\n          align: 'center',\r\n          value: 'cpf'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Valor',\r\n          value: 'valorVenda'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Parc.',\r\n          value: 'qtdParcela'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Loja',\r\n          value: 'nomeLoja'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Autorização',\r\n          value: 'codigoAutorizacao'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Tipo',\r\n          value: 'tipoAutorizacao'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Usuário',\r\n          align: 'center',\r\n          value: 'nomeUsuario'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Recusa por',\r\n          value: 'reusado'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Situação',\r\n          align: 'center',\r\n          value: 'situacao'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Ações',\r\n          align: 'center'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Carnê',\r\n          align: 'center'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Recibo',\r\n          align: 'center'\r\n        }\r\n      ],\r\n      items: [],\r\n      totalItems: null,\r\n      loading: false,\r\n      loadingBtn: false,\r\n      situacoes: []\r\n    }\r\n  },\r\n  watch: {\r\n    pagination: {\r\n      handler () {\r\n        this.paginar()\r\n      }\r\n    }\r\n  },\r\n  beforeMount () {\r\n    TiposBusiness.getAllStatusVenda()\r\n      .then(response => {\r\n        this.situacoes = response.data\r\n      }).finally(() => {\r\n        this.loading = false\r\n      })\r\n  },\r\n  methods: {\r\n    closeDialogCancelar () {\r\n      this.dialogCancelar = false\r\n      this.vendaId = null\r\n    },\r\n    closeReciboVenda () {\r\n      this.dialogReciboVenda = false\r\n      this.vendaId = null\r\n    },\r\n    confirmarCancelar () {\r\n      this.loading = true\r\n      VendaBusiness.cancelarVenda(this.vendaId)\r\n        .then(response => {\r\n          this.$root.showSucesso('Operação realizada com sucesso')\r\n          this.paginar()\r\n        }).catch(erro => {\r\n          this.$root.showErro('Erro ao tentar cancelar venda: ' + erro)\r\n        }).finally(() => {\r\n          this.loading = false\r\n          this.closeDialogCancelar()\r\n        })\r\n    },\r\n\r\n    openDialogCancelar (item) {\r\n      this.dialogCancelar = true\r\n      this.vendaId = item.vendaId\r\n    },\r\n\r\n    openReciboVenda (item) {\r\n      this.vendaId = item.vendaId\r\n      this.dialogReciboVenda = true\r\n    },\r\n\r\n    openImprimirCarne (item) {\r\n      this.carneId = item.carneId\r\n      this.vendaId = item.vendaId\r\n      this.dialogImprimirCarne = true\r\n    },\r\n\r\n    closeImprimirCarne () {\r\n      this.dialogImprimirCarne = false\r\n      this.vendaId = null\r\n      this.carneId = null\r\n    },\r\n\r\n    pesquisar () {\r\n      this.$validator.validate().then(result => {\r\n        if (result) {\r\n          this.loadingBtn = true\r\n          this.paginar()\r\n        } else {\r\n          this.$root.showAlerta(\r\n            'Informe o CPF!'\r\n          )\r\n        }\r\n      })\r\n    },\r\n    paginar () {\r\n      this.loading = true\r\n      VendaBusiness.paginationAutorizacao(this.pagination.rowsPerPage, this.pagination.page - 1, this.pagination.sortBy || 'dataCompra', this.filtros)\r\n        .then(response => {\r\n          this.items = response.data.content\r\n          this.totalItems = response.data.totalElements\r\n        }).catch(error => {\r\n          this.$root.showErro(error.data)\r\n        })\r\n        .finally(() => {\r\n          this.loadingBtn = false\r\n          this.loading = false\r\n        })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Autorizacao.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Autorizacao.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Autorizacao.vue?vue&type=template&id=32b78d04&\"\nimport script from \"./Autorizacao.vue?vue&type=script&lang=js&\"\nexport * from \"./Autorizacao.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}