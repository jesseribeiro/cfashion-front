{"version":3,"sources":["webpack:///./src/utils/numberUtils.js","webpack:///./src/views/pagamentos/ConsultarPagamentos.vue?3fb5","webpack:///src/views/pagamentos/ConsultarPagamentos.vue","webpack:///./src/views/pagamentos/ConsultarPagamentos.vue?1b1a","webpack:///./src/views/pagamentos/ConsultarPagamentos.vue"],"names":["__webpack_exports__","convertStringToNumber","valorStr","Number","replaceAll","replace","calculaDescontoPercentual","valorBase","percentual","percentualCalculado","this","console","log","formatValorMonetario","valor","toLocaleString","minimumFractionDigits","maximumFractionDigits","render","_vm","_h","$createElement","_c","_self","attrs","fluid","grid-list-md","row","wrap","md12","color","title","novalidate","on","submit","$event","preventDefault","pesquisar","staticClass","md3","items","redes","item-value","item-text","label","model","value","filtros","callback","$$v","$set","expression","md2","type","md1","_v","loading","loadingBtn","flat","_s","qtdItems","valorTotal","active","indeterminate","height","headers","total-items","totalItems","pagination","rows-per-page-items","rowsPerPageItems","rows-per-page-text","rowsPerPageText","item-key","update:pagination","scopedSlots","_u","key","fn","ref","item","_f","dataPagto","href","clienteCpf","valorPago","tipoPagto","nomeLoja","click","openRecibo","flgCancelado","status","motivo-cancelamento","motivoCancelamento","openDialogCancelar","justify-center","persistent","max-width","dialogCancelar","itemSelecionado","staticStyle","outline","closeDialogCancelar","confirmarCancelar","_e","pagamento-id","pagamentoId","show","dialogRecibo","close","closeRecibo","staticRenderFns","ClienteReciboPagamento","__webpack_require__","e","then","bind","ConsultarPagamentosvue_type_script_lang_js_","components","data","money","constants","rowsPerPage","redeId","dataInicial","dateUtils","ontem","dataFinal","currentDate","localPagamentoId","sortable","text","align","locaisPagamento","id","descricao","watch","handler","paginar","beforeMount","_this","push","business","getAllRedes","response","concat","finally","methods","_this2","motivo","cancelarPagamento","lojaId","usuarioId","$root","showSucesso","catch","erro","showErro","showAlerta","Object","objectSpread2","_this3","$validator","validate","result","$vuetify","t","_this4","page","sortBy","content","totalElements","error","message","numberUtils","pagamentos_ConsultarPagamentosvue_type_script_lang_js_","component","componentNormalizer"],"mappings":"gJAAeA,EAAA,MACbC,sBADa,SACUC,GAErB,OAAMA,EAEGC,OAAOD,EAASE,WAAW,IAAK,IAAIC,QAAQ,IAAK,KAAKA,QAAQ,aAAc,KAE9E,GAETC,0BATa,SAScC,EAAWC,GACpC,GAAIA,EAAY,CACd,IAAIC,EAAuBC,KAAKT,sBAAsBO,GAAc,IAIpE,OAHAG,QAAQC,IAAI,wBAA0BH,GACtCE,QAAQC,IAAI,cAAgBL,GAC5BI,QAAQC,IAAI,iBAAmBL,EAAYE,GACpCF,EAAYE,EAErB,OAAO,GAETI,qBAnBa,SAmBSC,GACpB,OAAIA,EACKA,EAAMC,eAAe,SAAWC,sBAAuB,EAAGC,sBAAuB,IAEnF,mDCvBX,IAAAC,EAAA,WAA0B,IAAAC,EAAAT,KAAaU,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,eAAyBE,OAAOC,MAAA,GAAAC,eAAA,MAA8BJ,EAAA,YAAiBE,OAAOG,IAAA,GAAAC,KAAA,MAAoBN,EAAA,UAAeE,OAAOK,KAAA,MAAWP,EAAA,iBAAsBE,OAAOM,MAAA,UAAAC,MAAA,0BAAkDT,EAAA,UAAeE,OAAOQ,WAAA,IAAgBC,IAAKC,OAAA,SAAAC,GAAkD,OAAxBA,EAAAC,iBAAwBjB,EAAAkB,UAAAF,OAA+Bb,EAAA,UAAegB,YAAA,gBAA0BhB,EAAA,eAAAA,EAAA,YAAmCE,OAAOG,IAAA,GAAAC,KAAA,MAAoBN,EAAA,UAAeE,OAAOe,IAAA,MAAUjB,EAAA,kBAAuBE,OAAOgB,MAAArB,EAAAsB,MAAAC,aAAA,KAAAC,YAAA,YAAAC,MAAA,QAA2EC,OAAQC,MAAA3B,EAAA4B,QAAA,OAAAC,SAAA,SAAAC,GAAoD9B,EAAA+B,KAAA/B,EAAA4B,QAAA,SAAAE,IAAqCE,WAAA,qBAA8B,GAAA7B,EAAA,UAAmBE,OAAO4B,IAAA,MAAU9B,EAAA,gBAAqBE,OAAOoB,MAAA,eAAAS,KAAA,QAAqCR,OAAQC,MAAA3B,EAAA4B,QAAA,YAAAC,SAAA,SAAAC,GAAyD9B,EAAA+B,KAAA/B,EAAA4B,QAAA,cAAAE,IAA0CE,WAAA,0BAAmC,GAAA7B,EAAA,UAAmBE,OAAO8B,IAAA,MAAUhC,EAAA,QAAagB,YAAA,mDAA6DnB,EAAAoC,GAAA,SAAAjC,EAAA,UAA+BE,OAAO4B,IAAA,MAAU9B,EAAA,gBAAqBE,OAAOoB,MAAA,aAAAS,KAAA,QAAmCR,OAAQC,MAAA3B,EAAA4B,QAAA,UAAAC,SAAA,SAAAC,GAAuD9B,EAAA+B,KAAA/B,EAAA4B,QAAA,YAAAE,IAAwCE,WAAA,wBAAiC,WAAA7B,EAAA,kBAAAA,EAAA,YAAAA,EAAA,SAA8DE,OAAOgC,QAAArC,EAAAsC,WAAA3B,MAAA,UAAAuB,KAAA,YAA4DlC,EAAAoC,GAAA,mCAAAjC,EAAA,UAAyDE,OAAOK,KAAA,MAAWP,EAAA,UAAAA,EAAA,aAA+BE,OAAOkC,KAAA,GAAA5B,MAAA,WAA2BR,EAAA,mBAAwBgB,YAAA,SAAmBnB,EAAAoC,GAAA,0CAAAjC,EAAA,KAA2DgB,YAAA,gBAA0BnB,EAAAoC,GAAA,sCAAAjC,EAAA,QAA0DgB,YAAA,UAAoBnB,EAAAoC,GAAApC,EAAAwC,GAAAxC,EAAAyC,UAAA,OAAAzC,EAAAoC,GAAA,oCAAAjC,EAAA,QAA2FgB,YAAA,UAAoBnB,EAAAoC,GAAA,MAAApC,EAAAwC,GAAAxC,EAAAN,qBAAAM,EAAA0C,qBAAA,GAAAvC,EAAA,qBAAmGE,OAAOsC,OAAA3C,EAAAqC,QAAA1B,MAAA,aAAAiC,cAAA,GAAAC,OAAA,OAA2E1C,EAAA,gBAAqBgB,YAAA,8BAAAd,OAAiDyC,QAAA9C,EAAA8C,QAAAzB,MAAArB,EAAAqB,MAAA0B,cAAA/C,EAAAgD,WAAAC,WAAAjD,EAAAiD,WAAAC,sBAAAlD,EAAAiD,WAAAE,iBAAAC,qBAAApD,EAAAiD,WAAAI,gBAAAC,WAAA,MAA2NxC,IAAKyC,oBAAA,SAAAvC,GAAqChB,EAAAiD,WAAAjC,IAAuBwC,YAAAxD,EAAAyD,KAAsBC,IAAA,QAAAC,GAAA,SAAAC,GAC7+E,IAAAC,EAAAD,EAAAC,KACA,OAAA1D,EAAA,MAAiBgB,YAAA,mBAA6BnB,EAAAoC,GAAApC,EAAAwC,GAAAxC,EAAA8D,GAAA,SAAA9D,CAAA6D,EAAAE,UAAA,uBAAA5D,EAAA,MAAAA,EAAA,KAAwFE,OAAO2D,KAAA,gBAAAH,EAAA,cAAAA,EAAA,oBAA6E7D,EAAAoC,GAAA,qBAAApC,EAAAwC,GAAAqB,EAAAI,YAAA,wBAAA9D,EAAA,MAAuFgB,YAAA,kBAA4BnB,EAAAoC,GAAApC,EAAAwC,GAAAxC,EAAAN,qBAAAmE,EAAAK,eAAA/D,EAAA,MAAAH,EAAAoC,GAAApC,EAAAwC,GAAAqB,EAAAM,cAAAhE,EAAA,MAAAH,EAAAoC,GAAApC,EAAAwC,GAAAqB,EAAAO,aAAAjE,EAAA,MAAyJgB,YAAA,mBAA6BhB,EAAA,UAAeE,OAAOO,MAAA,eAAsBE,IAAKuD,MAAA,SAAArD,GAAyBhB,EAAAsE,WAAAT,OAAuB7D,EAAAoC,GAAA,qBAAAjC,EAAA,MAAuCgB,YAAA,mBAA6B0C,EAAAU,aAAqJpE,EAAA,yBAA+FE,OAAOmE,OAAA,YAAAC,sBAAAZ,EAAAa,sBAA3PvE,EAAA,UAAoCE,OAAOM,MAAA,QAAAC,MAAA,sBAA6CE,IAAKuD,MAAA,SAAArD,GAAyBhB,EAAA2E,mBAAAd,OAA+B7D,EAAAoC,GAAA,2DAA0K,WAAW,OAAApC,EAAA,gBAAAG,EAAA,YAA+CE,OAAOG,IAAA,GAAAoE,iBAAA,MAA8BzE,EAAA,YAAiBE,OAAOwE,WAAA,GAAAC,YAAA,OAAkCpD,OAAQC,MAAA3B,EAAA,eAAA6B,SAAA,SAAAC,GAAoD9B,EAAA+E,eAAAjD,GAAuBE,WAAA,oBAA8B7B,EAAA,UAAAA,EAAA,gBAAkCgB,YAAA,aAAuBnB,EAAAoC,GAAA,wBAAAjC,EAAA,eAAAA,EAAA,YAAkEE,OAAOG,IAAA,GAAAC,KAAA,MAAoBN,EAAA,UAAeE,OAAOK,KAAA,MAAWP,EAAA,WAAgBE,OAAOsB,OAAA,EAAAO,KAAA,aAA+B/B,EAAA,QAAAH,EAAAoC,GAAA,kDAAAjC,EAAA,UAAmFE,OAAOK,KAAA,MAAWP,EAAA,cAAmBE,OAAOoB,MAAA,oCAA2CC,OAAQC,MAAA3B,EAAAgF,gBAAA,OAAAnD,SAAA,SAAAC,GAA4D9B,EAAA+B,KAAA/B,EAAAgF,gBAAA,SAAAlD,IAA6CE,WAAA,6BAAsC,WAAA7B,EAAA,kBAAAA,EAAA,SAA+C8E,aAAatE,MAAA,oBAA2BN,OAAQ6E,QAAA,IAAapE,IAAKuD,MAAArE,EAAAmF,uBAAiCnF,EAAAoC,GAAA,cAAAjC,EAAA,YAAAA,EAAA,SAAkDE,OAAOgC,QAAArC,EAAAsC,WAAA3B,MAAA,OAAuCG,IAAKuD,MAAArE,EAAAoF,qBAA+BpF,EAAAoC,GAAA,gCAAApC,EAAAqF,KAAArF,EAAA,aAAAG,EAAA,4BAAoGE,OAAOiF,eAAAtF,EAAAuF,YAAAC,KAAAxF,EAAAyF,aAAAC,MAAA1F,EAAA2F,eAAgF3F,EAAAqF,MAAA,QAChvEO,iECmMAC,EAAA,kBAAAC,EAAAC,EAAA,cAAAC,KAAAF,EAAAG,KAAA,eAEAC,GACAC,YACAN,0BAEAO,KAJA,WAKA,OACAC,MAAAC,EAAA,KACAvB,gBAAA,EACAU,cAAA,EACAxC,YACAsD,YAAAD,EAAA,QACAnD,iBAAAmD,EAAA,MAEA1E,SACA4E,OAAAF,EAAA,KACAG,YAAAC,EAAA,KAAAC,QACAC,UAAAF,EAAA,KAAAG,cACAC,iBAAAR,EAAA,MAEAxD,UAEAiE,UAAA,EACAC,KAAA,oBACAC,MAAA,SACAtF,MAAA,cAGAoF,UAAA,EACAC,KAAA,MACArF,MAAA,eAGAoF,UAAA,EACAC,KAAA,aACArF,MAAA,YACAsF,MAAA,UAGAF,UAAA,EACAC,KAAA,OACArF,MAAA,SAGAoF,UAAA,EACAC,KAAA,cACArF,MAAA,aAWAoF,UAAA,EACAC,KAAA,SACAC,MAAA,WAGAF,UAAA,EACAC,KAAA,QACAC,MAAA,WAGA5F,SACA2B,WAAA,EACAN,WAAA,EACAD,SAAA,EACAJ,SAAA,EACAC,YAAA,EACAiD,YAAA,KACAP,gBAAA,KACA1D,SACA4F,kBACAC,GAAAb,EAAA,KAAAc,UAAA,YAIAC,OACApE,YACAqE,QADA,WAEA/H,KAAAgI,aAIAC,YAvFA,WAuFA,IAAAC,EAAAlI,KACAA,KAAA8C,SAAA,EACA9C,KAAA+B,MAAAoG,MAAAP,GAAAb,EAAA,KAAAc,UAAA,gBACAO,EAAA,KAAAC,cAAA5B,KAAA,SAAA6B,GACAJ,EAAAnG,MAAAmG,EAAAnG,MAAAwG,OAAAD,EAAAzB,QACA2B,QAAA,WACAN,EAAApF,SAAA,KAGA2F,SACA7C,oBADA,WAEA5F,KAAAwF,gBAAA,EACAxF,KAAAyF,gBAAA,MAEAW,YALA,WAMApG,KAAAkG,cAAA,EACAlG,KAAAgG,YAAA,MAEAH,kBATA,WASA,IAAA6C,EAAA1I,KACAA,KAAAyF,gBAAAkD,QAIA3I,KAAA8C,SAAA,EACA9C,KAAA+C,YAAA,EACAqF,EAAA,KAAAQ,mBACAhB,GAAA5H,KAAAyF,gBAAAmC,GACAe,OAAA3I,KAAAyF,gBAAAkD,OACAE,OAAA7I,KAAAyF,gBAAAoD,OACAC,UAAA9I,KAAA+I,MAAAD,cAEArC,KAAA,SAAA6B,GACAI,EAAAK,MAAAC,YAAAV,EAAAzB,MACA6B,EAAAV,UACAU,EAAA9C,wBACAqD,MAAA,SAAAC,GACAR,EAAAK,MAAAI,SAAAD,EAAArC,MACA6B,EAAA5F,SAAA,EACA4F,EAAA3F,YAAA,KAlBA/C,KAAA+I,MAAAK,WAAA,qCAqBAhE,mBAhCA,SAgCAd,GACAtE,KAAAwF,gBAAA,EACAxF,KAAAyF,gBAAA4D,OAAAC,EAAA,KAAAD,IAAA/E,IAEAS,WApCA,SAoCAT,GACAtE,KAAAgG,YAAA1B,EAAAsD,GACA5H,KAAAkG,cAAA,GAEAvE,UAxCA,WAwCA,IAAA4H,EAAAvJ,KACAA,KAAAwJ,WAAAC,WAAAhD,KAAA,SAAAiD,GACAA,GACAH,EAAAxG,YAAA,EACAwG,EAAAvB,WAEAuB,EAAAR,MAAAK,WAAAG,EAAAI,SAAAC,EAAA,wCAIA5B,QAlDA,WAkDA,IAAA6B,EAAA7J,KACAA,KAAA8C,SAAA,EACAsF,EAAA,KAAA1E,WAAA1D,KAAA0D,WAAAsD,YAAAhH,KAAA0D,WAAAoG,KAAA,EAAA9J,KAAA0D,WAAAqG,QAAA,YAAA/J,KAAAqC,SACAoE,KAAA,SAAA6B,GACAuB,EAAA/H,MAAAwG,EAAAzB,KAAAmD,QAAA,iBACAH,EAAA1G,WAAAmF,EAAAzB,KAAAmD,QAAA,iBACAH,EAAA3G,SAAAoF,EAAAzB,KAAAmD,QAAA,eACAH,EAAApG,WAAA6E,EAAAzB,KAAAoD,gBACAhB,MAAA,SAAAiB,GACAL,EAAAd,MAAAI,SAAAe,EAAArD,KAAAsD,WAEA3B,QAAA,WACAqB,EAAA9G,YAAA,EACA8G,EAAA/G,SAAA,KAGA3C,qBAlEA,SAkEAC,GACA,OAAAgK,EAAA,KAAAjK,qBAAAC,MC3W4WiK,EAAA,cCO5WC,EAAgBjB,OAAAkB,EAAA,KAAAlB,CACdgB,EACA7J,EACA6F,GACF,EACA,KACA,KACA,MAIe/G,EAAA,WAAAgL","file":"js/chunk-e3cc.00266403.js","sourcesContent":["export default {\r\n  convertStringToNumber (valorStr) {\r\n    // eslint-disable-next-line no-extra-boolean-cast\r\n    if (!!valorStr) {\r\n      // return Number(valorStr.replace(',', '.').replace(/[^0-9.-]+/g, ''))\r\n      return Number(valorStr.replaceAll('.', '').replace(',', '.').replace(/[^0-9.-]+/g, ''))\r\n    }\r\n    return 0\r\n  },\r\n  calculaDescontoPercentual (valorBase, percentual) {\r\n    if (percentual) {\r\n      let percentualCalculado = (this.convertStringToNumber(percentual) / 100)\r\n      console.log('percentualCalculado: ' + percentualCalculado)\r\n      console.log('valorBase: ' + valorBase)\r\n      console.log('multiplicado: ' + valorBase * percentualCalculado)\r\n      return valorBase * percentualCalculado\r\n    }\r\n    return 0\r\n  },\r\n  formatValorMonetario (valor) {\r\n    if (valor) {\r\n      return valor.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })\r\n    }\r\n    return '0,00'\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('material-card',{attrs:{\"color\":\"primary\",\"title\":\"Consultar Pagamentos\"}},[_c('v-form',{attrs:{\"novalidate\":\"\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.pesquisar($event)}}},[_c('v-card',{staticClass:\"elevation-0\"},[_c('v-card-text',[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md3\":\"\"}},[_c('v-autocomplete',{attrs:{\"items\":_vm.redes,\"item-value\":\"id\",\"item-text\":\"descricao\",\"label\":\"Rede\"},model:{value:(_vm.filtros.redeId),callback:function ($$v) {_vm.$set(_vm.filtros, \"redeId\", $$v)},expression:\"filtros.redeId\"}})],1),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Data Inicial\",\"type\":\"date\"},model:{value:(_vm.filtros.dataInicial),callback:function ($$v) {_vm.$set(_vm.filtros, \"dataInicial\", $$v)},expression:\"filtros.dataInicial\"}})],1),_c('v-flex',{attrs:{\"md1\":\"\"}},[_c('span',{staticClass:\"layout fill-height align-center justify-center\"},[_vm._v(\"a\")])]),_c('v-flex',{attrs:{\"md2\":\"\"}},[_c('v-text-field',{attrs:{\"label\":\"Data Final\",\"type\":\"date\"},model:{value:(_vm.filtros.dataFinal),callback:function ($$v) {_vm.$set(_vm.filtros, \"dataFinal\", $$v)},expression:\"filtros.dataFinal\"}})],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"loading\":_vm.loadingBtn,\"color\":\"primary\",\"type\":\"submit\"}},[_vm._v(\"Pesquisar\")])],1)],1)],1)],1)],1),_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('v-card',[_c('v-toolbar',{attrs:{\"flat\":\"\",\"color\":\"white\"}},[_c('v-toolbar-title',{staticClass:\"mt-5\"},[_vm._v(\"\\n            Pagamentos\\n            \"),_c('p',{staticClass:\"body-1 mt-2\"},[_vm._v(\"\\n              Foram encontrados \"),_c('span',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.qtdItems)+\" \")]),_vm._v(\" pagamento(s) no valor total de \"),_c('span',{staticClass:\"title\"},[_vm._v(\"R$ \"+_vm._s(_vm.formatValorMonetario(_vm.valorTotal)))])])])],1),_c('v-progress-linear',{attrs:{\"active\":_vm.loading,\"color\":\"light-blue\",\"indeterminate\":\"\",\"height\":\"3\"}}),_c('v-data-table',{staticClass:\"elevation-1 arrow-pagintion\",attrs:{\"headers\":_vm.headers,\"items\":_vm.items,\"total-items\":_vm.totalItems,\"pagination\":_vm.pagination,\"rows-per-page-items\":_vm.pagination.rowsPerPageItems,\"rows-per-page-text\":_vm.pagination.rowsPerPageText,\"item-key\":\"id\"},on:{\"update:pagination\":function($event){_vm.pagination=$event}},scopedSlots:_vm._u([{key:\"items\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('td',{staticClass:\"text-xs-center\"},[_vm._v(_vm._s(_vm._f(\"moment\")(item.dataPagto,\"DD/MM/YYYY H:mm\")))]),_c('td',[_c('a',{attrs:{\"href\":(\"/cad-cliente/\" + (item.clienteId) + \"/\" + (item.localPagamentoId))}},[_vm._v(\"\\n                \"+_vm._s(item.clienteCpf)+\"\\n              \")])]),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(_vm.formatValorMonetario(item.valorPago)))]),_c('td',[_vm._v(_vm._s(item.tipoPagto))]),_c('td',[_vm._v(_vm._s(item.nomeLoja))]),_c('td',{staticClass:\"text-xs-center\"},[_c('v-icon',{attrs:{\"title\":\"Comprovante\"},on:{\"click\":function($event){_vm.openRecibo(item)}}},[_vm._v(\"mdi-receipt\")])],1),_c('td',{staticClass:\"text-xs-center\"},[(!item.flgCancelado)?_c('v-icon',{attrs:{\"color\":\"error\",\"title\":\"Cancelar Pagamento\"},on:{\"click\":function($event){_vm.openDialogCancelar(item)}}},[_vm._v(\"\\n                mdi-delete-outline\\n              \")]):_c('core-status-pagamento',{attrs:{\"status\":'Cancelado',\"motivo-cancelamento\":item.motivoCancelamento}})],1)]}}])})],1)],1),(_vm.dialogCancelar)?[_c('v-layout',{attrs:{\"row\":\"\",\"justify-center\":\"\"}},[_c('v-dialog',{attrs:{\"persistent\":\"\",\"max-width\":\"390\"},model:{value:(_vm.dialogCancelar),callback:function ($$v) {_vm.dialogCancelar=$$v},expression:\"dialogCancelar\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline\"},[_vm._v(\"Cancelar Pagamento\")]),_c('v-card-text',[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('v-alert',{attrs:{\"value\":true,\"type\":\"warning\"}},[_c('span',[_vm._v(\"Essa operação não poderá ser desfeita.\")])])],1),_c('v-flex',{attrs:{\"md12\":\"\"}},[_c('v-textarea',{attrs:{\"label\":\"Informe o motivo do cancelamento\"},model:{value:(_vm.itemSelecionado.motivo),callback:function ($$v) {_vm.$set(_vm.itemSelecionado, \"motivo\", $$v)},expression:\"itemSelecionado.motivo\"}})],1)],1)],1),_c('v-card-actions',[_c('v-btn',{staticStyle:{\"color\":\"black !important\"},attrs:{\"outline\":\"\"},on:{\"click\":_vm.closeDialogCancelar}},[_vm._v(\"Cancelar\")]),_c('v-spacer'),_c('v-btn',{attrs:{\"loading\":_vm.loadingBtn,\"color\":\"red\"},on:{\"click\":_vm.confirmarCancelar}},[_vm._v(\"Confirmar\")])],1)],1)],1)],1)]:_vm._e(),(_vm.dialogRecibo)?_c('cliente-recibo-pagamento',{attrs:{\"pagamento-id\":_vm.pagamentoId,\"show\":_vm.dialogRecibo,\"close\":_vm.closeRecibo}}):_vm._e()],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <v-container\r\n    fluid\r\n    grid-list-md>\r\n    <v-layout\r\n      row\r\n      wrap>\r\n      <v-flex md12>\r\n        <material-card\r\n          color=\"primary\"\r\n          title=\"Consultar Pagamentos\">\r\n          <v-form\r\n            novalidate\r\n            @submit.prevent=\"pesquisar\">\r\n            <v-card class=\"elevation-0\">\r\n              <v-card-text>\r\n                <v-layout\r\n                  row\r\n                  wrap>\r\n                  <v-flex md3>\r\n                    <v-autocomplete\r\n                      v-model=\"filtros.redeId\"\r\n                      :items=\"redes\"\r\n                      item-value=\"id\"\r\n                      item-text=\"descricao\"\r\n                      label=\"Rede\"\r\n                    />\r\n                  </v-flex>\r\n                  <!--\r\n                  <v-flex md3>\r\n                    <v-autocomplete\r\n                      v-model=\"filtros.localPagamentoId\"\r\n                      :items=\"locaisPagamento\"\r\n                      item-value=\"id\"\r\n                      item-text=\"descricao\"\r\n                      label=\"Local Pagamento\"\r\n                    />\r\n                  </v-flex>\r\n                  -->\r\n                  <v-flex md2>\r\n                    <v-text-field\r\n                      v-model=\"filtros.dataInicial\"\r\n                      label=\"Data Inicial\"\r\n                      type=\"date\"\r\n                    />\r\n                  </v-flex>\r\n                  <v-flex md1>\r\n                    <span class=\"layout fill-height align-center justify-center\">a</span>\r\n                  </v-flex>\r\n                  <v-flex md2>\r\n                    <v-text-field\r\n                      v-model=\"filtros.dataFinal\"\r\n                      label=\"Data Final\"\r\n                      type=\"date\"\r\n                    />\r\n                  </v-flex>\r\n                </v-layout>\r\n              </v-card-text>\r\n              <v-card-actions>\r\n                <v-spacer />\r\n                <v-btn\r\n                  :loading=\"loadingBtn\"\r\n                  color=\"primary\"\r\n                  type=\"submit\">Pesquisar</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-form>\r\n        </material-card>\r\n      </v-flex>\r\n      <v-flex md12>\r\n        <v-card>\r\n          <v-toolbar\r\n            flat\r\n            color=\"white\">\r\n            <v-toolbar-title class=\"mt-5\">\r\n              Pagamentos\r\n              <p class=\"body-1 mt-2\">\r\n                Foram encontrados <span class=\"title\">{{ qtdItems }} </span> pagamento(s) no valor total de <span class=\"title\">R$ {{ formatValorMonetario(valorTotal) }}</span>\r\n              </p>\r\n            </v-toolbar-title>\r\n          </v-toolbar>\r\n          <v-progress-linear\r\n            :active=\"loading\"\r\n            color=\"light-blue\"\r\n            indeterminate\r\n            height=\"3\"\r\n          />\r\n          <v-data-table\r\n            :headers=\"headers\"\r\n            :items=\"items\"\r\n            :total-items=\"totalItems\"\r\n            :pagination.sync=\"pagination\"\r\n            :rows-per-page-items=\"pagination.rowsPerPageItems\"\r\n            :rows-per-page-text=\"pagination.rowsPerPageText\"\r\n            item-key=\"id\"\r\n            class=\"elevation-1 arrow-pagintion\"\r\n          >\r\n            <template\r\n              slot=\"items\"\r\n              slot-scope=\"{ item }\"\r\n              ma-5>\r\n              <td class=\"text-xs-center\">{{ item.dataPagto | moment(\"DD/MM/YYYY H:mm\") }}</td>\r\n              <td>\r\n                <a :href=\"`/cad-cliente/${item.clienteId}/${item.localPagamentoId}`\">\r\n                  {{ item.clienteCpf }}\r\n                </a>\r\n              </td>\r\n              <td class=\"text-xs-right\">{{ formatValorMonetario(item.valorPago) }}</td>\r\n              <td>{{ item.tipoPagto }}</td>\r\n              <td>{{ item.nomeLoja }}</td>\r\n              <td class=\"text-xs-center\">\r\n                <v-icon\r\n                  title=\"Comprovante\"\r\n                  @click=\"openRecibo(item)\">mdi-receipt</v-icon>\r\n              </td>\r\n              <td class=\"text-xs-center\">\r\n                <v-icon\r\n                  v-if=\"!item.flgCancelado\"\r\n                  color=\"error\"\r\n                  title=\"Cancelar Pagamento\"\r\n                  @click=\"openDialogCancelar(item)\">\r\n                  mdi-delete-outline\r\n                </v-icon>\r\n                <core-status-pagamento\r\n                  v-else\r\n                  :status=\"'Cancelado'\"\r\n                  :motivo-cancelamento=\"item.motivoCancelamento\"\r\n                />\r\n              </td>\r\n            </template>\r\n          </v-data-table>\r\n        </v-card>\r\n      </v-flex>\r\n      <template\r\n        v-if=\"dialogCancelar\">\r\n        <v-layout\r\n          row\r\n          justify-center>\r\n          <v-dialog\r\n            v-model=\"dialogCancelar\"\r\n            persistent\r\n            max-width=\"390\">\r\n            <v-card>\r\n              <v-card-title class=\"headline\">Cancelar Pagamento</v-card-title>\r\n\r\n              <v-card-text>\r\n                <v-layout\r\n                  row\r\n                  wrap>\r\n                  <v-flex md12>\r\n                    <v-alert\r\n                      :value=\"true\"\r\n                      type=\"warning\"\r\n                    >\r\n                      <span>Essa operação não poderá ser desfeita.</span>\r\n                    </v-alert>\r\n                  </v-flex>\r\n                  <v-flex md12>\r\n                    <v-textarea\r\n                      v-model=\"itemSelecionado.motivo\"\r\n                      label=\"Informe o motivo do cancelamento\"\r\n                    />\r\n                  </v-flex>\r\n                </v-layout>\r\n              </v-card-text>\r\n\r\n              <v-card-actions>\r\n\r\n                <v-btn\r\n                  outline\r\n                  style=\"color: black !important\"\r\n                  @click=\"closeDialogCancelar\">Cancelar</v-btn>\r\n                <v-spacer/>\r\n\r\n                <v-btn\r\n                  :loading=\"loadingBtn\"\r\n                  color=\"red\"\r\n                  @click=\"confirmarCancelar\">Confirmar</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </v-dialog>\r\n        </v-layout>\r\n      </template>\r\n      <cliente-recibo-pagamento\r\n        v-if=\"dialogRecibo\"\r\n        :pagamento-id=\"pagamentoId\"\r\n        :show=\"dialogRecibo\"\r\n        :close=\"closeRecibo\"\r\n      />\r\n    </v-layout>\r\n  </v-container>\r\n</template>\r\n<script>\r\nimport { VendaBusiness, TiposBusiness, PagamentoBusiness } from '../../business'\r\nimport { MONEY, ROWS_PER_PAGE_ITEMS, TODAS_ID } from '../../constants'\r\nimport dateUtils from '../../utils/dateUtils'\r\nimport numberUtils from '../../utils/numberUtils'\r\n\r\nconst ClienteReciboPagamento = () => import('../clientes/ClienteReciboPagamento.vue')\r\n\r\nexport default {\r\n  components: {\r\n    ClienteReciboPagamento\r\n  },\r\n  data () {\r\n    return {\r\n      money: MONEY,\r\n      dialogCancelar: false,\r\n      dialogRecibo: false,\r\n      pagination: {\r\n        rowsPerPage: ROWS_PER_PAGE_ITEMS[2],\r\n        rowsPerPageItems: ROWS_PER_PAGE_ITEMS\r\n      },\r\n      filtros: {\r\n        redeId: TODAS_ID,\r\n        dataInicial: dateUtils.ontem(),\r\n        dataFinal: dateUtils.currentDate(),\r\n        localPagamentoId: TODAS_ID\r\n      },\r\n      headers: [\r\n        {\r\n          sortable: false,\r\n          text: 'Data do pagamento',\r\n          align: 'center',\r\n          value: 'dataPagto'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'CPF',\r\n          value: 'clienteCpf'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Valor Pago',\r\n          value: 'valorPago',\r\n          align: 'right'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Tipo',\r\n          value: 'tipo'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Local Pagto',\r\n          value: 'nomeLoja'\r\n        },\r\n        /*\r\n        {\r\n          sortable: false,\r\n          text: 'Origem',\r\n          align: 'center',\r\n          value: 'origem'\r\n        },\r\n        */\r\n        {\r\n          sortable: false,\r\n          text: 'Recibo',\r\n          align: 'center'\r\n        },\r\n        {\r\n          sortable: false,\r\n          text: 'Ações',\r\n          align: 'center'\r\n        }\r\n      ],\r\n      items: [],\r\n      totalItems: 0,\r\n      valorTotal: 0,\r\n      qtdItems: 0,\r\n      loading: false,\r\n      loadingBtn: false,\r\n      pagamentoId: null,\r\n      itemSelecionado: null,\r\n      redes: [],\r\n      locaisPagamento: [\r\n        { id: TODAS_ID, descricao: 'Todos' }\r\n      ]\r\n    }\r\n  },\r\n  watch: {\r\n    pagination: {\r\n      handler () {\r\n        this.paginar()\r\n      }\r\n    }\r\n  },\r\n  beforeMount () {\r\n    this.loading = true\r\n    this.redes.push({ id: TODAS_ID, descricao: 'Todas Redes' })\r\n    TiposBusiness.getAllRedes().then(response => {\r\n      this.redes = this.redes.concat(response.data)\r\n    }).finally(() => {\r\n      this.loading = false\r\n    })\r\n  },\r\n  methods: {\r\n    closeDialogCancelar () {\r\n      this.dialogCancelar = false\r\n      this.itemSelecionado = null\r\n    },\r\n    closeRecibo () {\r\n      this.dialogRecibo = false\r\n      this.pagamentoId = null\r\n    },\r\n    confirmarCancelar () {\r\n      if (!this.itemSelecionado.motivo) {\r\n        this.$root.showAlerta('Informe o motivo do cancelamento')\r\n        return\r\n      }\r\n      this.loading = true\r\n      this.loadingBtn = true\r\n      VendaBusiness.cancelarPagamento({\r\n        id: this.itemSelecionado.id,\r\n        motivo: this.itemSelecionado.motivo,\r\n        lojaId: this.itemSelecionado.lojaId,\r\n        usuarioId: this.$root.usuarioId()\r\n      })\r\n        .then(response => {\r\n          this.$root.showSucesso(response.data)\r\n          this.paginar()\r\n          this.closeDialogCancelar()\r\n        }).catch(erro => {\r\n          this.$root.showErro(erro.data)\r\n          this.loading = false\r\n          this.loadingBtn = false\r\n        })\r\n    },\r\n    openDialogCancelar (item) {\r\n      this.dialogCancelar = true\r\n      this.itemSelecionado = { ...item }\r\n    },\r\n    openRecibo (item) {\r\n      this.pagamentoId = item.id\r\n      this.dialogRecibo = true\r\n    },\r\n    pesquisar () {\r\n      this.$validator.validate().then(result => {\r\n        if (result) {\r\n          this.loadingBtn = true\r\n          this.paginar()\r\n        } else {\r\n          this.$root.showAlerta(this.$vuetify.t('$vuetify.Erro.camposObrigatorios'))\r\n        }\r\n      })\r\n    },\r\n    paginar () {\r\n      this.loading = true\r\n      PagamentoBusiness.pagination(this.pagination.rowsPerPage, this.pagination.page - 1, this.pagination.sortBy || 'dataPagto', this.filtros)\r\n        .then(response => {\r\n          this.items = response.data.content[0]['pagamentos']\r\n          this.valorTotal = response.data.content[0]['valorTotal']\r\n          this.qtdItems = response.data.content[0]['qtdItems']\r\n          this.totalItems = response.data.totalElements\r\n        }).catch(error => {\r\n          this.$root.showErro(error.data.message)\r\n        })\r\n        .finally(() => {\r\n          this.loadingBtn = false\r\n          this.loading = false\r\n        })\r\n    },\r\n    formatValorMonetario (valor) {\r\n      return numberUtils.formatValorMonetario(valor)\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConsultarPagamentos.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ConsultarPagamentos.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ConsultarPagamentos.vue?vue&type=template&id=56c1d1a0&\"\nimport script from \"./ConsultarPagamentos.vue?vue&type=script&lang=js&\"\nexport * from \"./ConsultarPagamentos.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}